<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Web API | hrf12blog</title><meta name="author" content="hrf12"><meta name="copyright" content="hrf12"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1.Web API介绍1.1 API的概念API（**Application Programming Interface**,应用程序编程接口）是一些预先定义的函数，目的是提供应用程序与开发人员基于某软件或硬件得以访问一组例程的能力，而又无需访问源码，或理解内部工作机制的细节。   任何开发语言都有自己的API API的特征输入和输出(I&#x2F;O) API的使用方法(console.log">
<meta property="og:type" content="article">
<meta property="og:title" content="Web API">
<meta property="og:url" content="http://hrf12.github.io/2022/03/13/05%20Web%20API/index.html">
<meta property="og:site_name" content="hrf12blog">
<meta property="og:description" content="1.Web API介绍1.1 API的概念API（**Application Programming Interface**,应用程序编程接口）是一些预先定义的函数，目的是提供应用程序与开发人员基于某软件或硬件得以访问一组例程的能力，而又无需访问源码，或理解内部工作机制的细节。   任何开发语言都有自己的API API的特征输入和输出(I&#x2F;O) API的使用方法(console.log">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
<meta property="article:published_time" content="2022-03-13T08:51:36.000Z">
<meta property="article:modified_time" content="2022-03-13T09:02:54.131Z">
<meta property="article:author" content="hrf12">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://hrf12.github.io/2022/03/13/05%20Web%20API/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Web API',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-03-13 17:02:54'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">hrf12blog</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Web API</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-13T08:51:36.000Z" title="发表于 2022-03-13 16:51:36">2022-03-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-03-13T09:02:54.131Z" title="更新于 2022-03-13 17:02:54">2022-03-13</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Web API"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><hr>
<h2 id="1-Web-API介绍"><a href="#1-Web-API介绍" class="headerlink" title="1.Web API介绍"></a>1.Web API介绍</h2><h3 id="1-1-API的概念"><a href="#1-1-API的概念" class="headerlink" title="1.1 API的概念"></a>1.1 API的概念</h3><pre><code>API（**Application Programming Interface**,应用程序编程接口）是一些预先定义的函数，目的是提供应用程序与开发人员基于某软件或硬件得以访问一组例程的能力，而又无需访问源码，或理解内部工作机制的细节。
</code></pre>
<ul>
<li>任何开发语言都有自己的API</li>
<li>API的特征输入和输出(I&#x2F;O)</li>
<li>API的使用方法(console.log())</li>
</ul>
<h3 id="1-2-Web-API的概念"><a href="#1-2-Web-API的概念" class="headerlink" title="1.2 Web API的概念"></a>1.2 Web API的概念</h3><pre><code>浏览器提供的一套操作浏览器功能和页面元素的API(BOM和DOM)

此处的Web API特指浏览器提供的API(一组方法)。
</code></pre>
<blockquote>
<p>   Web API在后面的课程中有其它含义(网络应用程序接口。它包含了广泛的功能，网络应用通过API接口，可以实现存储服务、消息服务、计算服务的能力，利用这些能力可以进行开发出强大功能的web应用 B&#x2F;S  C&#x2F;S。)</p>
</blockquote>
<h3 id="1-3-掌握常见的浏览器提供的API的调用方式"><a href="#1-3-掌握常见的浏览器提供的API的调用方式" class="headerlink" title="1.3 掌握常见的浏览器提供的API的调用方式"></a>1.3 掌握常见的浏览器提供的API的调用方式</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API">MDN-Web API</a></p>
<h3 id="1-4-JavaScript的组成"><a href="#1-4-JavaScript的组成" class="headerlink" title="1.4 JavaScript的组成"></a>1.4 JavaScript的组成</h3><p><img src="/media/1496912475691.png" alt="1496912475691"></p>
<h4 id="1-4-1-ECMAScript-JavaScript的核心"><a href="#1-4-1-ECMAScript-JavaScript的核心" class="headerlink" title="1.4.1 ECMAScript - JavaScript的核心"></a>1.4.1 ECMAScript - JavaScript的核心</h4><pre><code>定义了javascript的语法规范

JavaScript的核心，描述了语言的基本语法和数据类型，ECMAScript是一套标准，定义了一种语言的标准与具体实现无关
</code></pre>
<h4 id="1-4-2-BOM-浏览器对象模型"><a href="#1-4-2-BOM-浏览器对象模型" class="headerlink" title="1.4.2 BOM - 浏览器对象模型"></a>1.4.2 BOM - 浏览器对象模型</h4><pre><code>一套操作浏览器功能的API

通过BOM可以操作浏览器窗口，比如：弹出框、控制浏览器跳转、获取分辨率等
</code></pre>
<h4 id="1-4-3-DOM-文档对象模型"><a href="#1-4-3-DOM-文档对象模型" class="headerlink" title="1.4.3 DOM - 文档对象模型"></a>1.4.3 DOM - 文档对象模型</h4><pre><code>一套操作页面元素的API

DOM可以把HTML看做是文档树，通过DOM提供的API可以对树上的节点进行操作
</code></pre>
<h2 id="2-DOM"><a href="#2-DOM" class="headerlink" title="2. DOM"></a>2. DOM</h2><h3 id="2-1-DOM的概念"><a href="#2-1-DOM的概念" class="headerlink" title="2.1 DOM的概念"></a>2.1 DOM的概念</h3><pre><code>文档对象模型（Document Object Model，简称DOM），是[W3C](http://baike.baidu.com/item/W3C)组织推荐的处理可扩展标志语言的标准编程接口。在网页上，组织页面（或文档）的对象被组织在一个树形结构中，用来表示文档中对象的标准模型就称为DOM。

Document Object Model的历史可以追溯至1990年代后期微软与[Netscape](http://baike.baidu.com/item/Netscape)的“浏览器大战”，双方为了在[JavaScript](http://baike.baidu.com/item/JavaScript)与[JScript](http://baike.baidu.com/item/JScript)一决生死，于是大规模的赋予浏览器强大的功能。微软在网页技术上加入了不少专属事物，既有[VBScript](http://baike.baidu.com/item/VBScript)、[ActiveX](http://baike.baidu.com/item/ActiveX)、以及微软自家的[DHTML](http://baike.baidu.com/item/DHTML)格式等，使不少网页使用非微软平台及浏览器无法正常显示。DOM即是当时蕴酿出来的杰作。

DOM又称为文档树模型
</code></pre>
<p><img src="/media/1497154623955.png" alt="1497154623955"></p>
<ul>
<li>文档：一个网页可以称为文档</li>
<li>节点：网页中的所有内容都是节点（标签、属性、文本、注释等）</li>
<li>元素：网页中的标签</li>
<li>属性：标签的属性</li>
</ul>
<p><img src="/media/1497165666684.png" alt="1497165666684"></p>
<h3 id="2-2-为什么要DOM"><a href="#2-2-为什么要DOM" class="headerlink" title="2.2 为什么要DOM"></a>2.2 为什么要DOM</h3><pre><code>万物皆对象，有了对象支持通过对象的方式来获取修改元素。如果没有DOM对象，那么要找到页面上某个元素，只能通过字符串查找的方式，太过麻烦，费时费力。
</code></pre>
<h3 id="2-3-DOM可以做什么"><a href="#2-3-DOM可以做什么" class="headerlink" title="2.3 DOM可以做什么"></a>2.3 DOM可以做什么</h3><ul>
<li>获取元素</li>
<li>动态创建元素</li>
<li>对元素进行操作(设置其属性或调用其方法)</li>
<li>事件(什么时机做相应的操作)</li>
</ul>
<h3 id="2-4-添加事件的三种方式"><a href="#2-4-添加事件的三种方式" class="headerlink" title="2.4 添加事件的三种方式"></a>2.4 添加事件的三种方式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.初级方案</span></span><br><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;显示效果&quot;</span> onclick=<span class="string">&quot;alert(&#x27;我被点了&#x27;)&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.中级方案</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">alert</span>(<span class="string">&quot;这是一个对话框&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;显示效果&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;f1()&quot;</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.最终方案：使用dom对象进行事件分配</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;开始分离代码&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="comment">//  //根据id属性的值从整个文档中获取这个元素(标签)</span></span><br><span class="line"><span class="keyword">var</span> btnObj1=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn1&quot;</span>);</span><br><span class="line">  <span class="comment">//为该元素注册点击事件</span></span><br><span class="line">btnObj1.<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;哦,这真是太好了&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据id属性的值从整个文档中获取这个元素(标签)</span></span><br><span class="line"><span class="comment">//为该元素注册点击事件</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn1&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;哦,这真是太好了&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//注意  : &lt;script&gt;标签在body前后位置带来的影响</span></span><br></pre></td></tr></table></figure>

<h2 id="3-获取页面元素"><a href="#3-获取页面元素" class="headerlink" title="3. 获取页面元素"></a>3. 获取页面元素</h2><h3 id="3-1-为什么要获取页面元素"><a href="#3-1-为什么要获取页面元素" class="headerlink" title="3.1 为什么要获取页面元素"></a>3.1 为什么要获取页面元素</h3><p>例如：我们想要操作页面上的某部分(显示&#x2F;隐藏，动画)，需要先获取到该部分对应的元素，才进行后续操作</p>
<h3 id="3-2-根据id获取元素"><a href="#3-2-根据id获取元素" class="headerlink" title="3.2 根据id获取元素"></a>3.2 根据id获取元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取到的数据类型 HTMLDivElement，对象都是有类型的</span></span><br><span class="line"><span class="comment">// HTMLDivElement &lt;-- HTMLElement &lt;-- Element  &lt;-- Node  &lt;-- EventTarget</span></span><br></pre></td></tr></table></figure>

<pre><code>注意：由于id名具有唯一性，部分浏览器支持直接使用id名访问元素，但不是标准方式，不推荐使用。
</code></pre>
<h3 id="3-3-根据标签名获取元素"><a href="#3-3-根据标签名获取元素" class="headerlink" title="3.3 根据标签名获取元素"></a>3.3 根据标签名获取元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> divs = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; divs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> div = divs[i];</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(div);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-根据name获取元素"><a href="#3-4-根据name获取元素" class="headerlink" title="3.4 根据name获取元素"></a>3.4 根据name获取元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> inputs = <span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&#x27;hobby&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; inputs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> input = inputs[i];</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(input);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-根据类名获取元素"><a href="#3-5-根据类名获取元素" class="headerlink" title="3.5 根据类名获取元素"></a>3.5 根据类名获取元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//h5，IE9之后支持</span></span><br><span class="line"><span class="keyword">var</span> mains = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;main&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; mains.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> main = mains[i];</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(main);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-6-根据选择器获取元素"><a href="#3-6-根据选择器获取元素" class="headerlink" title="3.6 根据选择器获取元素"></a>3.6 根据选择器获取元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> text = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#text&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(text);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> boxes = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.box&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; boxes.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> box = boxes[i];</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-7-getElementsByTagName和querySelector的区别"><a href="#3-7-getElementsByTagName和querySelector的区别" class="headerlink" title="3.7 getElementsByTagName和querySelector的区别"></a>3.7 getElementsByTagName和querySelector的区别</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.区别</span></span><br><span class="line">getElementsByTagName获取的是动态集合，querySelector获取的是静态集合。</span><br><span class="line">简单的说就是，动态就是选出的元素会随文档改变，静态的不会，取出来之后就和文档的改变无关了。</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.应用场景</span></span><br><span class="line">如果只要一次查找就可得到元素时，首选querySelector ；</span><br><span class="line">如果需要经过多级查找，才能得到元素时，用getElementsByTagName；</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>ddd<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>ccc<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;ul&#x27;</span>)[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    lis = ul.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;li&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ul.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>( lis.<span class="property">length</span>);  <span class="comment">//4</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span> </span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;ul&#x27;</span>)[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> lis = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;li&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ul.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>( lis.<span class="property">length</span>);  <span class="comment">//3</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="3-8-总结"><a href="#3-8-总结" class="headerlink" title="3.8 总结"></a>3.8 总结</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据id属性的值获取元素,返回来的是一个元素对象</span></span><br><span class="line">* <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;id属性的值&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据标签名字获取元素,返回来的是一个伪数组,里面保存了多个的DOM对象</span></span><br><span class="line">* <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;标签名字&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//下面的几个,有的浏览器不支持</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//根据name属性的值获取元素,返回来的是一个伪数组,里面保存了多个的DOM对象</span></span><br><span class="line">* <span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;name属性的值&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据类样式的名字来获取元素,返回来的是一个伪数组,里面保存了多个的DOM对象</span></span><br><span class="line">* <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;类样式的名字&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据选择器获取元素,返回来的是一个元素对象</span></span><br><span class="line">* <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;选择器的名字&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据选择器获取元素,返回来的是一个伪数组,里面保存了多个的DOM对象</span></span><br><span class="line">* <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;选择器的名字&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="4-属性操作"><a href="#4-属性操作" class="headerlink" title="4. 属性操作"></a>4. 属性操作</h2><h3 id="4-1-非表单元素的属性"><a href="#4-1-非表单元素的属性" class="headerlink" title="4.1 非表单元素的属性"></a>4.1 非表单元素的属性</h3><ul>
<li>href、title、id、src</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;http://www.baidu.com&quot;</span> title=<span class="string">&quot;baidu&quot;</span> id=<span class="string">&quot;link&quot;</span>&gt;点我&lt;/a&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> link = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>);</span><br><span class="line"><span class="comment">//通过console.dir(link) 可以查看该a节点对象的所有信息</span></span><br><span class="line"><span class="comment">//通过打印我们发现除了title和href属性之外，document文档对象模型还帮我们封装了其他很多属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(link);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(link.<span class="property">href</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(link.<span class="property">title</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(link.<span class="property">host</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pic = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pic&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pic.<span class="property">src</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//我们也可以直接通过link.href = &quot;xx&quot;来给属性赋值</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>innerText&#x2F;textContent&#x2F;innerHTML&#x2F;value</p>
<pre><code> a) textContent和innerText的区别

         textContent : 设置标签中的文本内容,谷歌,火狐支持,IE8不支持
         innerText : 设置标签中的文本内容,谷歌,火狐,IE8都支持

         如果这个属性在浏览器中不支持,那么这个属性的类型是undefined，所以判断这个属性的类型是不是    undefined,就知道浏览器是否支持。
</code></pre>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置任意的标签中间的任意文本内容</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setInnerText</span>(<span class="params">element,text</span>) &#123;</span><br><span class="line">  <span class="comment">//判断浏览器是否支持这个属性</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> element.<span class="property">textContent</span> ==<span class="string">&quot;undefined&quot;</span>)&#123;</span><br><span class="line">      <span class="comment">//不支持</span></span><br><span class="line">      element.<span class="property">innerText</span>=text;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">//支持这个属性</span></span><br><span class="line">      element.<span class="property">textContent</span>=text;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取任意标签中间的文本内容</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getInnerText</span>(<span class="params">element</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> element.<span class="property">textContent</span>==<span class="string">&quot;undefined&quot;</span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> element.<span class="property">innerText</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> element.<span class="property">textContent</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>b) innerText和innerHTML的区别

            如果使用innerText主要是设置和获取文本的,设置标签内容,是没有标签的效果的
         innerHTML主要的作用是在标签中设置新的html或者获取html标签内容,是有标签效果的
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">   <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerText</span>=<span class="string">&quot;哈哈&quot;</span>;<span class="comment">//设置文本</span></span><br><span class="line">   <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerText</span>=<span class="string">&quot;&lt;p&gt;这是一个p&lt;/p&gt;&quot;</span>;<span class="comment">//设置html标签的代码</span></span><br><span class="line"></span><br><span class="line">   <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerHTML</span>=<span class="string">&quot;哈哈&quot;</span>;</span><br><span class="line">   <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerHTML</span>=<span class="string">&quot;&lt;p&gt;这是一个p&lt;/p&gt;&quot;</span>;<span class="comment">//设置Html标签的</span></span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//获取</span></span><br><span class="line"> <span class="title function_">my$</span>(<span class="string">&quot;btn2&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">   <span class="comment">//可以获取标签中的文本内容</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerText</span>);</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerHTML</span>);</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>

<pre><code>c)  value : 主要是用来给value属性赋值
</code></pre>
<ul>
<li>类名操作 : 修改标签的className属性相当于直接修改标签的类名</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.<span class="property">className</span> = <span class="string">&#x27;clearfix&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-样式操作"><a href="#4-2-样式操作" class="headerlink" title="4.2 样式操作"></a>4.2 样式操作</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、获取行内（内嵌、行间）样式：</span></span><br><span class="line">    obj.<span class="property">style</span>.<span class="property">attr</span>;进行获取非行间样式。</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、设置行内样式：</span></span><br><span class="line">    obj.<span class="property">style</span>.<span class="property">attr</span> = value;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、举例：</span></span><br><span class="line">	<span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">	box.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;100px&#x27;</span>;</span><br><span class="line">	box.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&#x27;100px&#x27;</span>;</span><br><span class="line">	box.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">		</span><br><span class="line"><span class="comment">//通过样式属性设置宽高、位置的属性类型是字符串，需要加上px</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-案例"><a href="#4-3-案例" class="headerlink" title="4.3 案例"></a>4.3 案例</h3><p>1.点击按钮显示图片</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;显示图片&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;im&quot;</span> /&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//根据id获取按钮,</span></span><br><span class="line">  <span class="keyword">var</span> btnObj=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>);</span><br><span class="line">  <span class="comment">//为按钮注册点击事件,添加事件处理函数</span></span><br><span class="line">  btnObj.<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//根据id获取图片的标签,设置图片的src属性值</span></span><br><span class="line">    <span class="keyword">var</span> imObj=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;im&quot;</span>);</span><br><span class="line">    imObj.<span class="property">src</span>=<span class="string">&quot;images/liuyan.jpg&quot;</span>;</span><br><span class="line">    <span class="comment">//设置图片的大小</span></span><br><span class="line">    <span class="comment">//直接设置属性值，无需加单位px</span></span><br><span class="line">    imObj.<span class="property">width</span>=<span class="string">&quot;300&quot;</span>;</span><br><span class="line">    imObj.<span class="property">height</span>=<span class="string">&quot;400&quot;</span>;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<p>2.点击按钮修改p标签中的内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据id获取按钮,为按钮注册点击事件,添加事件处理函数</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">//根据id获取p标签,设置内容</span></span><br><span class="line">    <span class="comment">//凡是成对的标签,中间的文本内容,设置的时候,都使用innerText这个属性的方式</span></span><br><span class="line">	<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>).<span class="property">innerText</span>=<span class="string">&quot;这是一个p&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>3.点击按钮修改a标签的链接和文字</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//根据id获取超链接,设置href属性</span></span><br><span class="line">    <span class="keyword">var</span> aObj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;ak&quot;</span>);</span><br><span class="line">    aObj.<span class="property">href</span> = <span class="string">&quot;http://www.baidu.cn&quot;</span>;</span><br><span class="line">    <span class="comment">//根据id获取超链接,设置文字内容</span></span><br><span class="line">    aObj.<span class="property">innerText</span> = <span class="string">&quot;学习前端真快乐&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>4.点击(每个)图片弹出对话框</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;images/1.jpg&quot;</span> alt=<span class="string">&quot;&quot;</span> id=<span class="string">&quot;im1&quot;</span> /&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/2.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;im2&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/3.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;im3&quot;</span> /&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.分别绑定事件</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;im1&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;被点了&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;im2&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;被点了&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;im3&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;被点了&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.获取到所有标签，循环绑定事件</span></span><br><span class="line"><span class="comment">//根据标签的名字获取图片标签,分别注册点击事件</span></span><br><span class="line"><span class="keyword">var</span> imgObjs=<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">	<span class="comment">//循环遍历数组,获取每个图片标签,注册点击事件,添加事件处理函数</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;imgObjs.<span class="property">length</span>;i++)&#123;</span><br><span class="line">		imgObjs[i].<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;被点击了&quot;</span>);</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.点击按钮修改value属性值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;按钮&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> btnObj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>);</span><br><span class="line">btnObj.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">//修改按钮的value属性</span></span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">value</span>=<span class="string">&quot;我是按钮,谁咬我,我就咬谁&quot;</span>;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">type</span>=<span class="string">&quot;text&quot;</span>;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">id</span>=<span class="string">&quot;btn2&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>6.点击按钮修改每个图片的title属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;按钮&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line">    </span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">//返回的是一个伪数组</span></span><br><span class="line">    <span class="comment">//伪数组具备length 、按索引存储数据、遍历等行为，但是不具备数组的方法，比如push() pop()等</span></span><br><span class="line">	<span class="keyword">var</span> imgObjs = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">	imgObjs[<span class="number">0</span>].<span class="property">alt</span> = <span class="string">&quot;改了&quot;</span>;</span><br><span class="line">	imgObjs[<span class="number">0</span>].<span class="property">title</span> = <span class="string">&quot;现实吧&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>7.点击图片修改自身的宽和高</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;images/liuyan.jpg&quot;</span> alt=<span class="string">&quot;&quot;</span> id=<span class="string">&quot;im&quot;</span>/&gt;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//点击图片,修改自身的宽和高</span></span><br><span class="line"><span class="keyword">var</span> imgObj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;im&quot;</span>);</span><br><span class="line">imgObj.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//直接使用自身属性，不需要px  </span></span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">width</span> = <span class="string">&quot;200&quot;</span>;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">height</span> = <span class="string">&quot;300&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>8.点击按钮修改所有p标签内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;显示效果&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>哈哈,我又变帅了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>哈哈,我又变帅了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>哈哈,我又变帅了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>哈哈,我又变帅了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>哈哈,我又变帅了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>嘎嘎<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>嘎嘎<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>嘎嘎<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>嘎嘎<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//案例:点击按钮设置多个p标签的文字内容</span></span><br><span class="line"><span class="comment">//根据id获取按钮,注册点击事件,添加事件处理函数</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">//根据标签名字获取标签</span></span><br><span class="line">	<span class="keyword">var</span> pObjs= <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">	<span class="comment">//var pObjs=document.getElementById(&quot;dv1&quot;).getElementsByTagName(&quot;p&quot;);</span></span><br><span class="line">	<span class="comment">//循环遍历这个数组</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;pObjs.<span class="property">length</span>;i++)&#123;</span><br><span class="line">		<span class="comment">//每个p标签,设置文字</span></span><br><span class="line">		pObjs[i].<span class="property">innerText</span>=<span class="string">&quot;我们都是p&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>9.点击按钮修改所有文本框内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;修改文本框的值&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//根据id获取按钮,为按钮注册点击事件,添加事件处理函数</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">//获取所有的文本框</span></span><br><span class="line">	<span class="keyword">var</span> inputs = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;input&quot;</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; inputs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">		<span class="comment">//判断这个元素是不是按钮</span></span><br><span class="line">		<span class="keyword">if</span> (inputs[i].<span class="property">type</span> != <span class="string">&quot;button&quot;</span>) &#123;</span><br><span class="line">			inputs[i].<span class="property">value</span> = <span class="string">&quot;呵呵，天亮了&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>10.按钮排他性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;没怀孕&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;没怀孕&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;没怀孕&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;没怀孕&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;没怀孕&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;没怀孕&quot;</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取所有的按钮,分别注册点击事件</span></span><br><span class="line"><span class="keyword">var</span> btnObjs = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;input&quot;</span>);</span><br><span class="line"><span class="comment">//循环遍历所有的按钮</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btnObjs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">	<span class="comment">//为每个按钮都要注册点击事件</span></span><br><span class="line">	btnObjs[i].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="comment">//把所有的按钮的value值设置为默认的值:没怀孕</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; btnObjs.<span class="property">length</span>; j++) &#123;</span><br><span class="line">			btnObjs[j].<span class="property">value</span> = <span class="string">&quot;没怀孕&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//当前被点击的按钮设置为:怀孕了</span></span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">value</span> = <span class="string">&quot;怀孕了&quot;</span>;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>11.点击按钮修改图片</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;显示大图&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1-small.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;im&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">function my$(id) &#123;</span></span><br><span class="line"><span class="language-xml">	return document.getElementById(id);</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml">my$(&quot;btn&quot;).onclick=function () &#123;</span></span><br><span class="line"><span class="language-xml">	my$(&quot;im&quot;).src=&quot;images/1.jpg&quot;;</span></span><br><span class="line"><span class="language-xml">&#125;;</span></span><br></pre></td></tr></table></figure>

<p>12.点击按钮设置宽高</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击按钮,修改div的宽,高,背景颜色</span></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//使用css属性，值要px</span></span><br><span class="line">	<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">style</span>.<span class="property">width</span> = <span class="string">&quot;300px&quot;</span>;</span><br><span class="line">	<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">style</span>.<span class="property">height</span> = <span class="string">&quot;200px&quot;</span>;</span><br><span class="line">    <span class="comment">//css  --&gt;background-color</span></span><br><span class="line">    <span class="comment">//js   --&gt;backgroundColor</span></span><br><span class="line">	<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;pink&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>13.点击按钮切换显示和隐藏</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;隐藏&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">//根据id获取按钮,注册点击事件,添加事件处理函数</span></span><br><span class="line"><span class="language-xml">my$(&quot;btn&quot;).onclick=function () &#123;</span></span><br><span class="line"><span class="language-xml">	//判断当前点击的按钮的value属性值</span></span><br><span class="line"><span class="language-xml">	if(this.value==&quot;隐藏&quot;)&#123;</span></span><br><span class="line"><span class="language-xml">		my$(&quot;dv&quot;).style.display=&quot;none&quot;;//隐藏</span></span><br><span class="line"><span class="language-xml">		this.value=&quot;显示&quot;;</span></span><br><span class="line"><span class="language-xml">	&#125;else if(this.value==&quot;显示&quot;)&#123;</span></span><br><span class="line"><span class="language-xml">		my$(&quot;dv&quot;).style.display=&quot;block&quot;;//显示</span></span><br><span class="line"><span class="language-xml">		this.value=&quot;隐藏&quot;;</span></span><br><span class="line"><span class="language-xml">	&#125;</span></span><br><span class="line"><span class="language-xml">&#125;;</span></span><br></pre></td></tr></table></figure>

<p>14.点击按钮设置div的样式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;设置样式&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.cls</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">300px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">background-color</span>: yellow;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//设置div的样式</span></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//在js代码中DOM操作的时候,设置元素的类样式,不用class关键字,应该使用,className</span></span><br><span class="line">      <span class="comment">//如果有多个样式，中间用空格隔开</span></span><br><span class="line">      <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">className</span>=<span class="string">&quot;cls&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>15.点击按钮开关灯</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;开/关灯&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.cls</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">background-color</span>: black;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//获取body标签</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">className</span> = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">className</span> != <span class="string">&quot;cls&quot;</span> ? <span class="string">&quot;cls&quot;</span> : <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>16案例：隔行变色</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;隔行变色&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;uu&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>红旗<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>五菱宏光<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>奔驰<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>兰博基尼<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>哈弗<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>奥拓<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>奥迪<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>悍马<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//获取所有的li标签</span></span><br><span class="line">    <span class="keyword">var</span> list = <span class="title function_">my$</span>(<span class="string">&quot;uu&quot;</span>).<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      list[i].<span class="property">style</span>.<span class="property">backgroundColor</span> = i % <span class="number">2</span> == <span class="number">0</span> ? <span class="string">&quot;red&quot;</span> : <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>17.根据name属性值获取元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;显示效果&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;您好&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name1&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;您好&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name2&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;您好&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name1&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;您好&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name3&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;您好&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name1&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;您好&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name1&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//通过name属性值获取元素-------表单的标签</span></span><br><span class="line">    <span class="keyword">var</span> inputs=<span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;name1&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;inputs.<span class="property">length</span>;i++)&#123;</span><br><span class="line">      inputs[i].<span class="property">value</span>=<span class="string">&quot;我很好&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>18.根据类样式来获取元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;这是一个p&lt;/p&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span>这是另一个p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span>这是第一个span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>这是第二个span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span>这是第一个div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>这是第二个div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;显示效果&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>/&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//点击按钮设置应用cls类样式的标签的背景颜色为红色</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//getElementsByClassName();------&gt;h5的，IE9之后支持</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//根据类样式的名字来获取元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> objs = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;cls&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; objs.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//设置每个元素的背景颜色</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      objs[i].<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;red&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>19.querySelector获取元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">put type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;显示效果&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span>这是一个p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>这是一个span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span>这是一个span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> btnObj= <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#btn&quot;</span>);</span><br><span class="line">btnObj.<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&quot;哈哈,我又变帅了&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> objs=<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.cls&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;objs.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    objs[i].<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&quot;green&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-样式操作的注意事项"><a href="#4-4-样式操作的注意事项" class="headerlink" title="4.4 样式操作的注意事项"></a>4.4 样式操作的注意事项</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//obj.style.width = 100; 只能设置行内样式(该样式直接添加在标签体里面)</span></span><br><span class="line"><span class="comment">//console.log(obj.style.width) 也只能获取行内样式</span></span><br><span class="line"><span class="comment">//如果width的值是写在&lt;style&gt;&lt;/style&gt;表前体里面的，此时通过obj.style.width无法获取obj的宽度</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//1、获取非行内样式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getStyle</span>(<span class="params">obj,attr</span>)&#123;    <span class="comment">//获取非行间样式，obj是对象，attr是值</span></span><br><span class="line">    <span class="keyword">if</span>(obj.<span class="property">currentStyle</span>)&#123;   <span class="comment">//针对ie获取非行间样式</span></span><br><span class="line">        <span class="keyword">return</span> obj.<span class="property">currentStyle</span>[attr];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">getComputedStyle</span>(obj,<span class="literal">false</span>)[attr];   <span class="comment">//针对非ie</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.封装写法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">css</span>(<span class="params">obj,attr,value</span>)&#123;   <span class="comment">//对象，样式，值。传2个参数的时候为获取样式，3个是设置样式</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">arguments</span>.<span class="property">length</span> == <span class="number">2</span>)&#123;  <span class="comment">//arguments参数数组，当参数数组长度为2时表示获取css样式</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">getStyle</span>(obj,attr);  <span class="comment">//返回对象的非行间样式用上面的getStyle函数</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">arguments</span>.<span class="property">length</span> == <span class="number">3</span>)&#123;  <span class="comment">//当传三个参数的时候为设置对象的某个值</span></span><br><span class="line">            obj.<span class="property">style</span>[attr] = value;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="4-5-表单元素属性"><a href="#4-5-表单元素属性" class="headerlink" title="4.5 表单元素属性"></a>4.5 表单元素属性</h3><ul>
<li>value 用于大部分表单元素的内容获取(option除外)</li>
<li>type 可以获取input标签的类型(输入框或复选框等)</li>
<li>disabled 禁用属性</li>
<li>checked 复选框选中属性</li>
<li>selected 下拉菜单选中属性</li>
</ul>
<p>案例1.点击按钮禁用文本框</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;禁用文本框&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;文本框&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//先根据id获取按钮,为按钮注册点击事件,添加事件处理函数</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">//根据id获取文本框,设置disabled属性</span></span><br><span class="line">	<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;txt&quot;</span>).<span class="property">disabled</span>=<span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>案例2：点击按钮选择菜单</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点菜&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;ss&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>油炸榴莲<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>爆炒臭豆腐<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>清蒸<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;4&quot;</span> <span class="attr">id</span>=<span class="string">&quot;op1&quot;</span>&gt;</span>凉拌班主任<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;5&quot;</span>&gt;</span>红烧<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">my$</span>(<span class="params">id</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(id);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//点击按钮选择菜</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;op1&quot;</span>).<span class="property">selected</span>=<span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;tt&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span> <span class="attr">readonly</span>=<span class="string">&quot;readonly&quot;</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">  注册用户的协议:</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  某人问智者,</span></span><br><span class="line"><span class="language-xml">  大师:您觉得怎么做才是最快乐的?</span></span><br><span class="line"><span class="language-xml">  回答说:不要和愚者辩论</span></span><br><span class="line"><span class="language-xml">  这个人说:我不这么认为!</span></span><br><span class="line"><span class="language-xml">  大师说:您说的对,</span></span><br><span class="line"><span class="language-xml">  我就是这么帅</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;注册&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn2&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn2&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//设置textarea也用value，看成表单标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;tt&quot;</span>).<span class="property">value</span>=<span class="string">&quot;嘎嘎&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//my$(&quot;tt&quot;).innerText=&quot;哈哈&quot;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//注意点：如果要在下一个script标签中引用其他script标签中的函数，得让其他script标签写在前面</span></span><br></pre></td></tr></table></figure>

<p>案例3.点击按钮修改性别和兴趣</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;修改性别&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span>/&gt;</span></span>男</span><br><span class="line">&lt;input type=<span class="string">&quot;radio&quot;</span> value=<span class="string">&quot;2&quot;</span> name=<span class="string">&quot;sex&quot;</span> id=<span class="string">&quot;rad1&quot;</span>/&gt;女</span><br><span class="line">&lt;input type=<span class="string">&quot;radio&quot;</span> value=<span class="string">&quot;3&quot;</span> name=<span class="string">&quot;sex&quot;</span>/&gt;保密</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">//规律:在表单标签中,如果属性和值只有一个,并且值是这个属性本身,那么</span></span><br><span class="line">  <span class="comment">//那么,在写js代码,DOM操作的时候,这个属性值,是布尔类型就可以了</span></span><br><span class="line">  <span class="title function_">my$</span>(<span class="string">&quot;btn1&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">my$</span>(<span class="string">&quot;rad1&quot;</span>).<span class="property">checked</span> = <span class="literal">true</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;选择兴趣&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn2&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;xingqu&quot;</span> /&gt;</span></span>吃饭</span><br><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> value=<span class="string">&quot;2&quot;</span> name=<span class="string">&quot;xingqu&quot;</span> /&gt;睡觉</span><br><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> value=<span class="string">&quot;3&quot;</span> name=<span class="string">&quot;xingqu&quot;</span> id=<span class="string">&quot;ck1&quot;</span> /&gt;打豆豆</span><br><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> value=<span class="string">&quot;4&quot;</span> name=<span class="string">&quot;xingqu&quot;</span> /&gt;打篮球</span><br><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> value=<span class="string">&quot;5&quot;</span> name=<span class="string">&quot;xingqu&quot;</span> /&gt;打足球</span><br><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> value=<span class="string">&quot;6&quot;</span> name=<span class="string">&quot;xingqu&quot;</span> id=<span class="string">&quot;ck2&quot;</span> /&gt;打铅球</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="title function_">my$</span>(<span class="string">&quot;btn2&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">my$</span>(<span class="string">&quot;ck1&quot;</span>).<span class="property">checked</span>=<span class="literal">true</span>;</span><br><span class="line">    <span class="title function_">my$</span>(<span class="string">&quot;ck2&quot;</span>).<span class="property">checked</span>=<span class="literal">true</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//注意：这里可以将my$的函数封装到common.js中</span></span><br></pre></td></tr></table></figure>

<p> 案例4 : 全选全不选</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"> &lt;table&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;j_cbAll&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>菜名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>饭店<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;j_tb&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>红烧肉<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>田老师<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>西红柿鸡蛋<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>田老师<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>油炸榴莲<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>田老师<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>清蒸助教<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>田老师<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  //获取全选的这个复选框</span><br><span class="line">  var ckAll = my$(&quot;j_cbAll&quot;);</span><br><span class="line">  //获取tbody中所有的小复选框</span><br><span class="line">  var cks = my$(&quot;j_tb&quot;).getElementsByTagName(&quot;input&quot;);</span><br><span class="line">  //点击全选的这个复选框,获取他当前的状态,然后设置tbody中所有复选框的状态</span><br><span class="line">  ckAll.onclick = function () &#123;</span><br><span class="line">    //console.log(this.checked);</span><br><span class="line">    for (var i = 0; i &lt; cks.length; i++) &#123;</span><br><span class="line">      cks[i].checked = this.checked;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  //获取tbody中所有的复选框,分别注册点击事件</span><br><span class="line">  for(var i=0;i&lt;cks.length;i++)&#123;</span><br><span class="line">    cks[i].onclick=function () &#123;</span><br><span class="line">      var flag=true;//默认都被选中了</span><br><span class="line">      //判断是否所有的复选框都选中</span><br><span class="line">      for(var j=0;j&lt;cks.length;j++)&#123;</span><br><span class="line">        if(!cks[j].checked)&#123;</span><br><span class="line">          //没选中就进来了</span><br><span class="line">          flag=false;</span><br><span class="line">          break;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      //全选的这个复选框的状态就是flag这个变量的值</span><br><span class="line">      ckAll.checked=flag;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="4-6-自定义属性操作"><a href="#4-6-自定义属性操作" class="headerlink" title="4.6 自定义属性操作"></a>4.6 自定义属性操作</h3><p>   在html标签中可以添加的自定义属性,通过setAttribute()设置自定义属性值，getAttribute()获取自定义属性值</p>
<ul>
<li>getAttribute() 获取标签行内属性</li>
<li>setAttribute() 设置标签行内属性</li>
<li>removeAttribute() 移除标签行内属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//元素.属性 和 getAttribute()区别：</span></span><br><span class="line"><span class="number">1.</span>元素.属性可以获取标签封装的dom对象中现有的属性值</span><br><span class="line"><span class="number">2.</span><span class="title function_">getAttribute</span>()可以获取任意的行内属性(写在标签中的属性)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=<span class="string">&quot;uu&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">score</span>=<span class="string">&quot;10&quot;</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">score</span>=<span class="string">&quot;20&quot;</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">score</span>=<span class="string">&quot;30&quot;</span>&gt;</span>王五<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">score</span>=<span class="string">&quot;40&quot;</span>&gt;</span>赵六<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">score</span>=<span class="string">&quot;50&quot;</span>&gt;</span>朱琪<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  //当前的li标签本身没有score这个属性,这个属性是程序员自己添加的。因此在构建此标签的文档对象的时候，标签的score属性不会被封装到dom对象中</span><br><span class="line">      </span><br><span class="line">  //score这个属性是自定义属性，为了存储一些数据</span><br><span class="line">  //在html标签中添加的自定义属性,如果想要获取这个属性的值,需要使用getAttribute(&quot;自定义属性的名字&quot;)才能获取这个属性的值</span><br><span class="line"></span><br><span class="line">  //获取所有的li标签</span><br><span class="line">  var list=document.getElementsByTagName(&quot;li&quot;);</span><br><span class="line">  for(var i=0;i&lt;list.length;i++)&#123;</span><br><span class="line">    list[i].onclick=function () &#123;</span><br><span class="line">      //alert(this.score);//不能</span><br><span class="line">      //可以</span><br><span class="line">      alert(this.getAttribute(&quot;score&quot;));</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  //总结:设置自定义属性:setAttribute(&quot;属性的名字&quot;,&quot;属性的值&quot;);</span><br><span class="line">  //获取自定义属性的值:getAttribute(&quot;属性的名字&quot;)</span><br><span class="line"></span><br><span class="line">   //根据id获取ul标签,并且或者该标签中所有的li</span><br><span class="line">  var list=my$(&quot;uu&quot;).getElementsByTagName(&quot;li&quot;);</span><br><span class="line">  //循环遍历</span><br><span class="line">  for(var i=0;i&lt;list.length;i++)&#123;</span><br><span class="line">    //先为每个li添加自定义属性</span><br><span class="line">    //list[i].score=(i+1)*10;//此方式,自定义属性在DOM对象上,不在标签中</span><br><span class="line">    list[i].setAttribute(&quot;score&quot;,(i+1)*10);</span><br><span class="line">    //点击每个li标签,显示对应的自定义属性值</span><br><span class="line">    list[i].onclick=function()&#123;</span><br><span class="line">      alert(this.getAttribute(&quot;score&quot;));</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;div id=&quot;dv&quot; score=&quot;10&quot; class=&quot;cls&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  //移除自定义属性:removeAttribute(&quot;属性的名字&quot;)</span><br><span class="line">  //点击按钮移除元素的自定义属性</span><br><span class="line">  my$(&quot;btn&quot;).onclick=function () &#123;</span><br><span class="line">    //my$(&quot;dv&quot;).removeAttribute(&quot;score&quot;);</span><br><span class="line">    </span><br><span class="line">    //还可以通过removeAttribute()移除元素的类样式</span><br><span class="line">    //my$(&quot;dv&quot;).className=&quot;&quot;;  //值没有了,但是属性还是有的</span><br><span class="line">    my$(&quot;dv&quot;).removeAttribute(&quot;class&quot;); //移除元素的自带的属性</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-7-自定义属性的注意事项"><a href="#4-7-自定义属性的注意事项" class="headerlink" title="4.7 自定义属性的注意事项"></a>4.7 自定义属性的注意事项</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. li.setAttribute(&quot;score&quot;,100);</span></span><br><span class="line"><span class="comment">//a.会在li标签上生成一个score属性</span></span><br><span class="line"><span class="comment">//b.该属性由于不是html的标准属性，所以不会被封装到dom对象中</span></span><br><span class="line"><span class="comment">//c.可以用getAttribute(&quot;score&quot;)方法来获取该属性值，但是由于该属性值不是对象的基本信息，所以无法通过li.score来访问</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2. li.score = 100;</span></span><br><span class="line"><span class="comment">//a.给li这个dom对象添加一个属性值，该信息会被添加到dom对象中</span></span><br><span class="line"><span class="comment">//b.不会在li标签上生成一个score属性</span></span><br><span class="line"><span class="comment">//c.可以通过li.score来访问该属性值，但是不可以用getAttribute(&quot;score&quot;)方法来获取该属性值，因为这个属性不在标签上</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.如果要给一个dom对象添加自定义的数据，建议直接使用点的方式，因为使用setAttribute()会在标签上生成额外的属性节点</span></span><br></pre></td></tr></table></figure>

<p>案例：tab键切换显示</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;box&quot;</span> id=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;current&quot;</span>&gt;</span>体育<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>娱乐<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>新闻<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>综合<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;current&quot;</span>&gt;</span>我是体育模块<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>我是娱乐模块<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>我是新闻模块<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>我是综合模块<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    * &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">padding</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">ul</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">list-style-type</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.box</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">400px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">300px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">overflow</span>: hidden;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hd</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">45px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hd</span> <span class="selector-tag">span</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">display</span>: inline-block;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">90px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">background-color</span>: pink;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">line-height</span>: <span class="number">45px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">cursor</span>: pointer;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hd</span> <span class="selector-tag">span</span><span class="selector-class">.current</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">background-color</span>: purple;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.bd</span> <span class="selector-tag">li</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">255px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">background-color</span>: purple;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">display</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.bd</span> <span class="selector-tag">li</span><span class="selector-class">.current</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">display</span>: block;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  //获取最外面的div</span><br><span class="line">  var box=my$(&quot;box&quot;);</span><br><span class="line">  //获取的是里面的第一个div</span><br><span class="line">  var hd=box.getElementsByTagName(&quot;div&quot;)[0];</span><br><span class="line">  //获取的是里面的第二个div</span><br><span class="line">  var bd=box.getElementsByTagName(&quot;div&quot;)[1];</span><br><span class="line">  //获取所有的li标签</span><br><span class="line">  var list=bd.getElementsByTagName(&quot;li&quot;);//=================================</span><br><span class="line">  //获取所有的span标签</span><br><span class="line">  var spans=hd.getElementsByTagName(&quot;span&quot;);</span><br><span class="line">  //循环遍历的方式,添加点击事件</span><br><span class="line">  for(var i=0;i&lt;spans.length;i++)&#123;</span><br><span class="line">    //在点击之前就把索引保存在span标签中</span><br><span class="line">    spans[i].setAttribute(&quot;index&quot;,i);//================================</span><br><span class="line">    spans[i].onclick=function () &#123;</span><br><span class="line">      //第一件事,所有的span的类样式全部移除</span><br><span class="line">      for(var j=0;j&lt;spans.length;j++)&#123;</span><br><span class="line">        spans[j].removeAttribute(&quot;class&quot;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      //第二件事,当前被点击的span应用类样式</span><br><span class="line">      this.className=&quot;current&quot;;</span><br><span class="line">      //span被点击的时候获取存储的索引值</span><br><span class="line">      //alert(this.getAttribute(&quot;index&quot;));</span><br><span class="line">      var num=this.getAttribute(&quot;index&quot;);//==============================</span><br><span class="line"></span><br><span class="line">      //获取所有的li标签,每个li标签先全部隐藏</span><br><span class="line">      for(var k=0;k&lt;list.length;k++)&#123;</span><br><span class="line">        list[k].removeAttribute(&quot;class&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">      //当前被点击的span对应的li标签显示</span><br><span class="line">      list[num].className=&quot;current&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="5-常用事件"><a href="#5-常用事件" class="headerlink" title="5. 常用事件"></a>5. 常用事件</h2><p>事件：触发-响应机制</p>
<h3 id="5-1-事件的基本使用"><a href="#5-1-事件的基本使用" class="headerlink" title="5.1 事件的基本使用"></a>5.1 事件的基本使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;代码会在box被点击后执行&#x27;</span>);  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-常用的事件"><a href="#5-2-常用的事件" class="headerlink" title="5.2 常用的事件"></a>5.2 常用的事件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mouseenter   mouseleave     不会触发事件冒泡</span><br><span class="line">mouseover    mouseout        会触发事件冒泡</span><br><span class="line"></span><br><span class="line">onkeydown    事件会在用户按下一个键盘按键时发生，先于onkeypress执行</span><br><span class="line">onkeypress   事件不会被所有按键触发（例如 ALT、CTRL、SHIFT、ESC）</span><br></pre></td></tr></table></figure>

<p><img src="/media%5C2.png"></p>
<h3 id="5-3-案例"><a href="#5-3-案例" class="headerlink" title="5.3 案例"></a>5.3 案例</h3><p>1.鼠标移入高亮</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>金士百<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>雪花<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>百威<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>燕京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>青岛<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>崂山<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>珠江<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>华丹<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//鼠标进入和鼠标离开两个事件</span></span><br><span class="line"><span class="comment">//获取所有的li标签</span></span><br><span class="line"><span class="keyword">var</span> list = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.<span class="property">length</span>; i++) &#123;</span><br><span class="line">	<span class="comment">//为li注册鼠标进入事件</span></span><br><span class="line">	list[i].<span class="property">onmouseover</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="comment">//为li注册鼠标离开事件</span></span><br><span class="line">	list[i].<span class="property">onmouseout</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="comment">//恢复到这个标签默认的颜色</span></span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.鼠标移入显示隐藏二维码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;nodeSmall&quot;</span> id=<span class="string">&quot;node_small&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>&lt;!--锚定--&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;erweima hide&quot;</span> <span class="attr">id</span>=<span class="string">&quot;er&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/456.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.nodeSmall</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">50px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">50px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">images/bgs.png</span>) no-repeat -<span class="number">159px</span> -<span class="number">51px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">position</span>: fixed;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">right</span>: <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">top</span>: <span class="number">40%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.erweima</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">left</span>: -<span class="number">150px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.nodeSmall</span> <span class="selector-tag">a</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">display</span>: block;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">50px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">50px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.hide</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">display</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.show</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">display</span>: block;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line">  </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取鼠标要进入的a标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//先获取最外面的div</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> aObj=<span class="title function_">my$</span>(<span class="string">&quot;node_small&quot;</span>).<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;a&quot;</span>)[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//为a注册鼠标进入</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  aObj.<span class="property">onmouseover</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;er&quot;</span>).<span class="property">className</span>=<span class="string">&quot;erweima show&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//为a注册鼠标离开</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  aObj.<span class="property">onmouseout</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;er&quot;</span>).<span class="property">className</span>=<span class="string">&quot;erweima hide&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>3.鼠标移入让div高亮</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"> 	<span class="selector-tag">div</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">150px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">background-color</span>: green;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">float</span>: left;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">border</span>: <span class="number">2px</span> solid green;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取所有的div</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> dvObjs=<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;div&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;dvObjs.<span class="property">length</span>;i++)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//为每个div添加鼠标进入的事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    dvObjs[i].<span class="property">onmouseover</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">border</span>=<span class="string">&quot;2px solid red&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//为每个div添加鼠标离开的事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    dvObjs[i].<span class="property">onmouseout</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">border</span>=<span class="string">&quot;&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>4.模拟输入框</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;请输入搜索内容&quot;</span> id=<span class="string">&quot;txt&quot;</span>/&gt;</span><br><span class="line">  </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">input</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">color</span>: gray;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//注册获取焦点的事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;txt&quot;</span>).<span class="property">onfocus</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//判断文本框的内容是不是默认的内容</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">value</span> == <span class="string">&quot;请输入搜索内容&quot;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="variable language_">this</span>.<span class="property">value</span> = <span class="string">&quot;&quot;</span>;<span class="comment">//清空文本框</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;black&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//注册失去焦点的事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;txt&quot;</span>).<span class="property">onblur</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">value</span>.<span class="property">length</span> == <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">value</span> = <span class="string">&quot;请输入搜索内容&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;gray&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>5.判断密码长度</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;&quot;</span> id=<span class="string">&quot;txt&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取文本框</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;txt&quot;</span>).<span class="property">onblur</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//判断密码的长度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">value</span>.<span class="property">length</span>&gt;=<span class="number">6</span>&amp;&amp;<span class="variable language_">this</span>.<span class="property">value</span>.<span class="property">length</span>&lt;=<span class="number">10</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&quot;red&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;<span class="keyword">else</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&quot;green&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="6-节点操作"><a href="#6-节点操作" class="headerlink" title="6. 节点操作"></a>6. 节点操作</h2><p><em>EventTarget</em>是一个由可以接收事件的对象实现的接口,并且可以为它们创建侦听器</p>
<p><img src="/media/1497169919418.png" alt="1497169919418"></p>
<h3 id="6-1-节点介绍"><a href="#6-1-节点介绍" class="headerlink" title="6.1 节点介绍"></a>6.1 节点介绍</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">节点(<span class="title class_">Node</span>)的分类：</span><br><span class="line">文档节点  <span class="title class_">Document</span></span><br><span class="line">元素节点  <span class="title class_">Element</span>  指的是页面中的标签</span><br><span class="line">属性节点  <span class="title class_">Attr</span></span><br><span class="line">文本节点  <span class="title class_">Text</span></span><br><span class="line"></span><br><span class="line">节点的属性：</span><br><span class="line">nodeType ： <span class="number">1</span>--&gt;标签，<span class="number">2</span>--&gt;属性,<span class="number">3</span>--&gt;文本</span><br><span class="line">nodeName ： 标签--&gt;标签名，属性--&gt;属性名，文本--&gt;#text</span><br><span class="line">nodeValue : 标签--&gt;<span class="literal">null</span>，属性--&gt;属性值，文本--&gt;文本内容</span><br><span class="line"></span><br><span class="line">节点层次的属性</span><br><span class="line">	parentNode    ---父节点</span><br><span class="line">    parentElement  ---父元素(结果和parentNode一样)</span><br><span class="line">	childNodes    ---所有子节点，包含文本节点</span><br><span class="line">	children      -- 所有子元素</span><br><span class="line">	nextSibling/previousSibling   --前一个子节点(包含文本节点),<span class="title class_">IE8</span>中获取第一个子元素</span><br><span class="line">    nextElementSibling/previousElementSibling   --前一个子元素，<span class="title class_">IE8</span>中不支持</span><br><span class="line">	firstChild/lastChild   --获取第一个子节点，<span class="title class_">IE8</span>中是第一个子元素</span><br><span class="line">    firstElementChild      --获取第一个子元素，<span class="title class_">IE8</span>中不支持</span><br></pre></td></tr></table></figure>

<h3 id="6-2-节点案例"><a href="#6-2-节点案例" class="headerlink" title="6.2 节点案例"></a>6.2 节点案例</h3><p>案例1：获取相关节点</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;dv&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>这是div中的第一个span标签<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是div中的第二个元素,第一个p标签<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;uu&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>乔峰<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>鹿茸<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;three&quot;</span>&gt;</span>段誉<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>卡卡西<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>雏田<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//1---------------------------------------------------------------------------------</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> dvObj=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;dv&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//获取里面的每个子节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;dvObj.<span class="property">childNodes</span>.<span class="property">length</span>;i++)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="keyword">var</span> node=dvObj.<span class="property">childNodes</span>[i];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//nodeType---&gt;节点的类型:1---标签,2---属性,3---文本</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//nodeName---&gt;</span></span></span>节点的名字:大写的标签--标签,小写的属性名---属性,#text---文本</span><br><span class="line">      <span class="comment">//nodeValue--&gt;节点的值:标签---null,属性--属性的值,文本--文本内容</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(node.<span class="property">nodeType</span>+<span class="string">&quot;=====&quot;</span>+node.<span class="property">nodeName</span>+<span class="string">&quot;====&quot;</span>+node.<span class="property">nodeValue</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> dvObj=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;dv&quot;</span>);</span><br><span class="line">    <span class="comment">//获取的是属性的节点</span></span><br><span class="line">    <span class="keyword">var</span> node=dvObj.<span class="title function_">getAttributeNode</span>(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(node.<span class="property">nodeType</span>+<span class="string">&quot;----&quot;</span>+node.<span class="property">nodeName</span>+<span class="string">&quot;====&quot;</span>+node.<span class="property">nodeValue</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> dvObj=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;dv&quot;</span>);</span><br><span class="line">    <span class="comment">//子节点</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(dvObj.<span class="property">childNodes</span>);<span class="comment">//7个子节点</span></span><br><span class="line">    <span class="comment">//子元素</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(dvObj.<span class="property">children</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2---------------------------------------------------------------------------------</span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  <span class="keyword">var</span> ulObj=<span class="title function_">my$</span>(<span class="string">&quot;uu&quot;</span>);</span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentNode</span>);<span class="comment">//div</span></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentNode</span>.<span class="property">parentNode</span>);<span class="comment">//body</span></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">parentNode</span>);<span class="comment">//html</span></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">parentNode</span>);<span class="comment">//document</span></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">parentNode</span>);<span class="comment">//null</span></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  <span class="comment">//ul标签的父级节点</span></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">   <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentNode</span>);</span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  <span class="comment">//ul标签的父级元素,结果和父节点一样</span></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">   <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentElement</span>);</span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">   <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentNode</span>.<span class="property">nodeType</span>);<span class="comment">//标签的---1</span></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">   <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentNode</span>.<span class="property">nodeName</span>);<span class="comment">//标签---大写的标签名字</span></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">   <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentNode</span>.<span class="property">nodeValue</span>);<span class="comment">//标签---null</span></span></span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//3---------------------------------------------------------------------------------</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取节点和元素的</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//ul</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> ulObj=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;uu&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//父级节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentNode</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//父级元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">parentElement</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//子节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">childNodes</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">children</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//第一个子节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">firstChild</span>);<span class="comment">//------------------------IE8中是第一个子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//第一个子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">firstElementChild</span>);<span class="comment">//-----------------IE8中不支持</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//最后一个子节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">lastChild</span>);<span class="comment">//------------------------IE8中是第一个子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//最后一个子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ulObj.<span class="property">lastElementChild</span>);<span class="comment">//-----------------IE8中不支持</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//某个元素的前一个兄弟节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">my$</span>(<span class="string">&quot;three&quot;</span>).<span class="property">previousSibling</span>);<span class="comment">//------------------------IE8中是前面一个子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//某个元素的前一个兄弟元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">my$</span>(<span class="string">&quot;three&quot;</span>).<span class="property">previousElementSibling</span>);<span class="comment">//-----------------IE8中不支持</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//某个元素的后一个兄弟节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">my$</span>(<span class="string">&quot;three&quot;</span>).<span class="property">nextSibling</span>);<span class="comment">//------------------------IE8中是后面一个子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//某个元素的后一个兄弟元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">my$</span>(<span class="string">&quot;three&quot;</span>).<span class="property">nextElementSibling</span>);<span class="comment">//-----------------IE8中不支持</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//总结:凡是获取节点的代码在谷歌和火狐得到的都是  相关的节点</span></span><br><span class="line">  <span class="comment">//凡是获取元素的代码在谷歌和火狐得到的都是   相关的元素</span></span><br><span class="line">  <span class="comment">//从子节点和兄弟节点开始,凡是获取节点的代码在IE8中得到的是元素,获取元素的相关代码,在IE8中得到的是undefined----元素的代码,iE中不支持</span></span><br></pre></td></tr></table></figure>

<p>案例2：点击按钮设置p标签背景色</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;变色&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>这是span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>这是span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>这是span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>这是span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//先获取div</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> dvObj = <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//获取里面所有的子节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> nodes = dvObj.<span class="property">childNodes</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//循环遍历所有的子节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nodes.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//判断这个子节点是不是p标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (nodes[i].<span class="property">nodeType</span> == <span class="number">1</span> &amp;&amp; nodes[i].<span class="property">nodeName</span> == <span class="string">&quot;P&quot;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        nodes[i].<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;red&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//点击按钮,设置p变色---节点的方式做</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>案例3：点击按钮隔行变色</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;变色&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;uu&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>AA<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>BB<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>CC<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>DD<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>EE<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>FF<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>GG<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>HH<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//隔行变色--li</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> count=<span class="number">0</span>;<span class="comment">//记录有多少个li</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//获取ul中所有的子节点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> nodes = <span class="title function_">my$</span>(<span class="string">&quot;uu&quot;</span>).<span class="property">childNodes</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//for循环里面不可以直接用i，因为nodes里面包含了文本节点，不光是li标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nodes.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//判断这个节点是不是li标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (nodes[i].<span class="property">nodeType</span> == <span class="number">1</span> &amp;&amp; nodes[i].<span class="property">nodeName</span> == <span class="string">&quot;LI&quot;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        nodes[i].<span class="property">style</span>.<span class="property">backgroundColor</span>=count%<span class="number">2</span>==<span class="number">0</span>?<span class="string">&quot;red&quot;</span>:<span class="string">&quot;yellow&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        count++;<span class="comment">//8个</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>案例4：切换背景图片</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;body id=<span class="string">&quot;bd&quot;</span>&gt;</span><br><span class="line">    &lt;div id=&quot;mask&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;images/1.jpg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;images/2.jpg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;images/3.jpg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script src=&quot;common.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">      var imgObjs=my$(&quot;mask&quot;).children;//获取的所有的子元素</span><br><span class="line">      //循环遍历所有img,注册点击事件</span><br><span class="line">      for(var i=0;i&lt;imgObjs.length;i++)&#123;</span><br><span class="line">        console.log(&quot;xx&quot;);</span><br><span class="line">        imgObjs[i].onclick=function () &#123;</span><br><span class="line">          document.body.style.backgroundImage=&quot;url(&quot;+this.src+&quot;)&quot;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0px;</span><br><span class="line">      padding: 0px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    body &#123;</span><br><span class="line">      background-image: url(&quot;images/1.jpg&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #mask &#123;</span><br><span class="line">      background-color: rgba(255, 255, 255, 0.3);</span><br><span class="line">      height: 200px;</span><br><span class="line">      text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #mask img &#123;</span><br><span class="line">      width: 200px;</span><br><span class="line">      margin-top: 35px;</span><br><span class="line">      cursor: pointer;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-3-获取节点的代码封装"><a href="#6-3-获取节点的代码封装" class="headerlink" title="6.3 获取节点的代码封装"></a>6.3 获取节点的代码封装</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//element.firstChild---&gt;谷歌和火狐获取的是第一个子节点</span></span><br><span class="line"><span class="comment">//element.firstChild---&gt;IE8获取的是第一个子元素</span></span><br><span class="line"><span class="comment">//element.firstElementChild------&gt;谷歌和火狐是第一个子元素,IE8不支持</span></span><br><span class="line"><span class="comment">//获取任意一个父级元素的第一个子级元素</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getFirstElementChild</span>(<span class="params">element</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(element.<span class="property">firstElementChild</span>)&#123;<span class="comment">//true---&gt;支持</span></span><br><span class="line">    <span class="keyword">return</span> element.<span class="property">firstElementChild</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> node=element.<span class="property">firstChild</span>;<span class="comment">//第一个节点</span></span><br><span class="line">    <span class="keyword">while</span> (node&amp;&amp;node.<span class="property">nodeType</span>!=<span class="number">1</span>)&#123;</span><br><span class="line">      node=node.<span class="property">nextSibling</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取任意一个父级元素的最后一个子级元素</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getLastElementChild</span>(<span class="params">element</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(element.<span class="property">lastElementChild</span>)&#123;<span class="comment">//true---&gt;支持</span></span><br><span class="line">    <span class="keyword">return</span> element.<span class="property">lastElementChild</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> node=element.<span class="property">lastChild</span>;<span class="comment">//第一个节点</span></span><br><span class="line">    <span class="keyword">while</span> (node&amp;&amp;node.<span class="property">nodeType</span>!=<span class="number">1</span>)&#123;</span><br><span class="line">      node=node.<span class="property">previousSibling</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getFirstElementChild</span>(<span class="title function_">my$</span>(<span class="string">&quot;uu&quot;</span>)).<span class="property">innerText</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getLastElementChild</span>(<span class="title function_">my$</span>(<span class="string">&quot;uu&quot;</span>)).<span class="property">innerText</span>);</span><br></pre></td></tr></table></figure>

<h3 id="6-4-节点操作的方法"><a href="#6-4-节点操作的方法" class="headerlink" title="6.4 节点操作的方法"></a>6.4 节点操作的方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">节点操作的方法</span><br><span class="line">	appendChild()</span><br><span class="line">	insertBefore()</span><br><span class="line">	removeChild()</span><br><span class="line">	replaceChild()</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;显示效果&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;干掉第一个子元素&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn2&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;干掉所有子元素&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn3&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> i=<span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    i++;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> obj= <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;input&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    obj.<span class="property">type</span>=<span class="string">&quot;button&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    obj.<span class="property">value</span>=<span class="string">&quot;按钮&quot;</span>+i;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//my$(&quot;dv&quot;).appendChild(obj);//追加子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//把新的子元素插入到my$(&quot;dv&quot;)第一个子元素的前面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="title function_">insertBefore</span>(obj,<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">firstElementChild</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//用obj2替换掉my$(&quot;dv&quot;)中的obj</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> obj2= <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;input&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    obj2.<span class="property">type</span>=<span class="string">&quot;button&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    obj2.<span class="property">value</span>=<span class="string">&quot;按钮&quot;</span>+<span class="number">2</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="title function_">replaceChild</span>(obj2,obj);<span class="comment">//</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn2&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//移除父级元素中第一个子级元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="title function_">removeChild</span>(<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">firstElementChild</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn3&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//点击按钮删除div中所有的子级元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//判断父级元素中有没有第一个子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">while</span>(<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">firstElementChild</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="title function_">removeChild</span>(<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">firstElementChild</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="7-创建元素的三种方式"><a href="#7-创建元素的三种方式" class="headerlink" title="7. 创建元素的三种方式"></a>7. 创建元素的三种方式</h2><h3 id="7-1-document-write"><a href="#7-1-document-write" class="headerlink" title="7.1 document.write()"></a>7.1 document.write()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;新设置的内容&lt;p&gt;标签也可以生成&lt;/p&gt;&#x27;</span>);</span><br><span class="line"><span class="comment">//document.write()创建元素,缺陷:如果是在页面加载完毕后,此时通过这种方式创建元素,那么页面上存在的所有的内容全部被干掉</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-innerHTML"><a href="#7-2-innerHTML" class="headerlink" title="7.2 innerHTML"></a>7.2 innerHTML</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给box追加文本内容</span></span><br><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.<span class="property">innerHTML</span> = <span class="string">&#x27;新内容&lt;p&gt;新标签&lt;/p&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//点击按钮,在div中创建一个图片</span></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">     <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerHTML</span>=<span class="string">&quot;&lt;img src=&#x27;images/liuyan.jpg&#x27; alt=&#x27;美女&#x27; /&gt;&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<pre><code>案例：点击按钮创建列表
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">&quot;杨过&quot;</span>, <span class="string">&quot;郭靖&quot;</span>, <span class="string">&quot;张无忌&quot;</span>, <span class="string">&quot;张三丰&quot;</span>, <span class="string">&quot;乔峰&quot;</span>, <span class="string">&quot;段飞&quot;</span>, <span class="string">&quot;丁棚&quot;</span>];</span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> str = <span class="string">&quot;&lt;ul style=&#x27;list-style-type: none; cursor: pointer&#x27;&gt;&quot;</span>;</span><br><span class="line">	<span class="comment">//根据循环创建对应对数的li</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; names.<span class="property">length</span>; i++) &#123;</span><br><span class="line">		str += <span class="string">&quot;&lt;li&gt;&quot;</span> + names[i] + <span class="string">&quot;&lt;/li&gt;&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	str += <span class="string">&quot;&lt;/ul&gt;&quot;</span>;</span><br><span class="line">	<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerHTML</span> = str;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//代码执行到这里,li已经有了</span></span><br><span class="line">	<span class="comment">//获取所有的li,遍历,添加鼠标进入事件,鼠标离开事件</span></span><br><span class="line">	<span class="keyword">var</span> list = <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.<span class="property">length</span>; i++) &#123;</span><br><span class="line">		<span class="comment">//鼠标进入</span></span><br><span class="line">		list[i].<span class="property">onmouseover</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="comment">//鼠标离开</span></span><br><span class="line">		list[i].<span class="property">onmouseout</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<pre><code>案例.二级联动
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;bj&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;tj&quot;</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;sh&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line">     </span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;area&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;hd&quot;</span>&gt;</span>海淀<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;cy&quot;</span>&gt;</span>朝阳<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;dc&quot;</span>&gt;</span>东城<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">		var selectCity = document.getElementById(&quot;city&quot;);</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">		var selectArea = document.getElementById(&quot;area&quot;);</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">		selectCity.onchange=function()&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">			var optionVal = selectCity.value;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">			if(optionVal==&quot;bj&quot;)&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">				selectArea.innerHTML = &quot;<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;hd&#x27;</span>&gt;</span>海淀<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;cy&#x27;</span>&gt;</span>朝阳<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;dc&#x27;</span>&gt;</span>东城<span class="tag">&lt;/<span class="name">option</span>&gt;</span>&quot;;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">			&#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">			else if(optionVal==&quot;tj&quot;)&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">				selectArea.innerHTML = &quot;<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;hk&#x27;</span>&gt;</span>南开<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;hx&#x27;</span>&gt;</span>河西<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;hd&#x27;</span>&gt;</span>河东<span class="tag">&lt;/<span class="name">option</span>&gt;</span>&quot;;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">			&#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">			else&#123;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">				selectArea.innerHTML = &quot;<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;pd&#x27;</span>&gt;</span>浦东<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;yp&#x27;</span>&gt;</span>杨浦<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;px&#x27;</span>&gt;</span>浦西<span class="tag">&lt;/<span class="name">option</span>&gt;</span>&quot;;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">			&#125;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">		&#125;;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-document-createElement"><a href="#7-3-document-createElement" class="headerlink" title="7.3 document.createElement()"></a>7.3 document.createElement()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//创建元素的</span></span><br><span class="line">    <span class="keyword">var</span> pObj = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">    <span class="title function_">setInnnerText</span>(pObj, <span class="string">&quot;这是一个p&quot;</span>);</span><br><span class="line">    <span class="comment">//把创建后的子元素追加到父级元素中</span></span><br><span class="line">    <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="title function_">appendChild</span>(pObj);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="7-3-1-使用document-createElement-循环插入元素"><a href="#7-3-1-使用document-createElement-循环插入元素" class="headerlink" title="7.3.1 使用document.createElement()循环插入元素"></a>7.3.1 使用document.createElement()循环插入元素</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同一元素无法重复插入</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> el = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">	el.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(<span class="string">&#x27;Hi&#x27;</span>));</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">10</span>; i &gt; <span class="number">0</span>; --i)</span><br><span class="line">		<span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(el);</span><br><span class="line">&#125;;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//正确的　　同时注意不要设置插入多次的元素的id,否则造成错误</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> el = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">	el.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(<span class="string">&#x27;Hi&#x27;</span>));</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">10</span>; i &gt; <span class="number">0</span>; --i)</span><br><span class="line">	<span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(el.<span class="title function_">cloneNode</span>(<span class="literal">true</span>));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="7-3-2-document-createDocumentFragment-的使用"><a href="#7-3-2-document-createDocumentFragment-的使用" class="headerlink" title="7.3.2 document.createDocumentFragment()的使用"></a>7.3.2 document.createDocumentFragment()的使用</h4><pre><code>上述方法，虽然能够成功生成相同的dom元素，但是性能上是存在问题的。

每次插入dom元素到body后，dom树会重排，之后页面会因为新的dom元素的插入而重新绘制，这两个过程是极其耗时的。

因此，推荐使用文档碎片document.createDocumentFragment()。

https://www.cnblogs.com/zhangkeyu/p/6665793.html
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//利用文档碎片 提高性能  frag相当于一个容器 frag并不会插入body而是把frag的内部元素全部插入body</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> frag = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>();</span><br><span class="line">	<span class="keyword">var</span> el = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">	el.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(<span class="string">&#x27;Hi&#x27;</span>));</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">10</span>; i &gt; <span class="number">0</span>; --i)</span><br><span class="line">		frag.<span class="title function_">appendChild</span>(el.<span class="title function_">cloneNode</span>(<span class="literal">true</span>));  <span class="comment">//先将生成的dom全部插入frag先，这个过程并不会触发重排与重绘</span></span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(frag); <span class="comment">//将生成的frag插入body中，将10此重排重绘的过程压缩为一次</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="7-3-3-案例"><a href="#7-3-3-案例" class="headerlink" title="7.3.3 案例"></a>7.3.3 案例</h4><ul>
<li>动态创建列表，高亮显示</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;创建列表&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    * &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">padding</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">ul</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">list-style-type</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">cursor</span>: pointer;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">div</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">400px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> kungfu = [<span class="string">&quot;降龙十八掌&quot;</span>, <span class="string">&quot;黯然销魂掌&quot;</span>, <span class="string">&quot;葵花宝典&quot;</span>, <span class="string">&quot;九阴真经&quot;</span>, <span class="string">&quot;吸星大法&quot;</span>, <span class="string">&quot;如来神掌&quot;</span>, <span class="string">&quot;化骨绵掌&quot;</span>, <span class="string">&quot;玉女心经&quot;</span>, <span class="string">&quot;极乐神功&quot;</span>, <span class="string">&quot;辟邪剑谱&quot;</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//点击按钮动态的创建列表,把列表加到div中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建ul,把ul立刻加入到父级元素div中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> ulObj = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;ul&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="title function_">appendChild</span>(ulObj);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//动态的创建li,加到ul中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; kungfu.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> liObj = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//设置li中间的文字内容</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      liObj.<span class="property">innerHTML</span> = kungfu[i];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ulObj.<span class="title function_">appendChild</span>(liObj);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//为li添加鼠标进入事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      liObj.<span class="property">onmouseover</span> = mouseoverHandle;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//为li添加鼠标离开事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      liObj.<span class="property">onmouseout</span> = mouseoutHandle;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//此位置.按钮的点击事件的外面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">mouseoverHandle</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;red&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">mouseoutHandle</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//如果是循环的方式添加事件,推荐用命名函数,因为可以保证循环中使用的都是同一个函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//如果不是循环的方式添加事件,推荐使用匿名函数。my$(&quot;btn&quot;).onclick = function()&#123;&#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>根据数据动态创建表格</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;创建表格&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> arr=[</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#123;<span class="attr">name</span>:<span class="string">&quot;百度&quot;</span>,<span class="attr">href</span>:<span class="string">&quot;http://www.baidu.com&quot;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#123;<span class="attr">name</span>:<span class="string">&quot;谷歌&quot;</span>,<span class="attr">href</span>:<span class="string">&quot;http://www.google.com&quot;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#123;<span class="attr">name</span>:<span class="string">&quot;优酷&quot;</span>,<span class="attr">href</span>:<span class="string">&quot;http://www.youku.com&quot;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#123;<span class="attr">name</span>:<span class="string">&quot;土豆&quot;</span>,<span class="attr">href</span>:<span class="string">&quot;http://www.tudou.com&quot;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#123;<span class="attr">name</span>:<span class="string">&quot;快播&quot;</span>,<span class="attr">href</span>:<span class="string">&quot;http://www.kuaibo.com&quot;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#123;<span class="attr">name</span>:<span class="string">&quot;爱奇艺&quot;</span>,<span class="attr">href</span>:<span class="string">&quot;http://www.aiqiyi.com&quot;</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//点击按钮创建表格</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建table加入到div中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> tableObj=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;table&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    tableObj.<span class="property">border</span>=<span class="string">&quot;1&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    tableObj.<span class="property">cellPadding</span>=<span class="string">&quot;0&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    tableObj.<span class="property">cellSpacing</span>=<span class="string">&quot;0&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="title function_">appendChild</span>(tableObj);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建行,把行加入到table中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> dt=arr[i];<span class="comment">//每个对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> trObj=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;tr&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      tableObj.<span class="title function_">appendChild</span>(trObj);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//创建第一个列,然后加入到行中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> td1=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;td&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      td1.<span class="property">innerText</span>=dt.<span class="property">name</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      trObj.<span class="title function_">appendChild</span>(td1);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//创建第二个列</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> td2=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;td&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      td2.<span class="property">innerHTML</span>=<span class="string">&quot;&lt;a href=&quot;</span>+dt.<span class="property">href</span>+<span class="string">&quot;&gt;&quot;</span>+dt.<span class="property">name</span>+<span class="string">&quot;&lt;/a&gt;&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      trObj.<span class="title function_">appendChild</span>(td2);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>模拟百度搜索框</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txt&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;搜索&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-id">#box</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">450px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">margin</span>: <span class="number">200px</span> auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-id">#txt</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">350px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> keyWords = [<span class="string">&quot;我是最纯洁的&quot;</span>, <span class="string">&quot;我是最帅的&quot;</span>, <span class="string">&quot;小段是最猥琐的&quot;</span>, <span class="string">&quot;小超是最龌龊的&quot;</span>, <span class="string">&quot;他说妹妹很乖&quot;</span>, <span class="string">&quot;传说在有个很帅很纯洁的张飞&quot;</span>, <span class="string">&quot;苹果好吃&quot;</span>, <span class="string">&quot;苹果此次召回还是没有中国&quot;</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取文本框注册键盘抬起事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;txt&quot;</span>).<span class="property">onkeyup</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//每一次的键盘抬起都判断页面中有没有这个div</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span>(<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>))&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//删除一次</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;box&quot;</span>).<span class="title function_">removeChild</span>(<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//获取文本框输入的内容</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> text = <span class="variable language_">this</span>.<span class="property">value</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//临时数组--空数组-------&gt;存放对应上的数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> tempArr = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//把文本框输入的内容和数组中的每个数据对比</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; keyWords.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//是否是最开始出现的</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (keyWords[i].<span class="title function_">indexOf</span>(text) == <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        tempArr.<span class="title function_">push</span>(keyWords[i]);<span class="comment">//追加</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//如果文本框是空的,临时数组是空的,不用创建div</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">value</span>.<span class="property">length</span> == <span class="number">0</span> || tempArr.<span class="property">length</span> == <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建div,把div加入id为box的div中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> dvObj = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;box&quot;</span>).<span class="title function_">appendChild</span>(dvObj);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    dvObj.<span class="property">id</span> = <span class="string">&quot;dv&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    dvObj.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&quot;350px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//dvObj.style.height=&quot;100px&quot;;//肯定是不需要的------</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    dvObj.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&quot;1px solid green&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//循环遍历临时数组,创建对应的p标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; tempArr.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//创建p标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> pObj = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;p&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//把p加到div中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      dvObj.<span class="title function_">appendChild</span>(pObj);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">setInnerText</span>(pObj, tempArr[i]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      pObj.<span class="property">style</span>.<span class="property">margin</span> = <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      pObj.<span class="property">style</span>.<span class="property">padding</span> = <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      pObj.<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&quot;pointer&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      pObj.<span class="property">style</span>.<span class="property">marginTop</span> = <span class="string">&quot;5px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      pObj.<span class="property">style</span>.<span class="property">marginLeft</span> = <span class="string">&quot;5px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//鼠标进入</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      pObj.<span class="property">onmouseover</span> = mouseoverHandle;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//鼠标离开</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      pObj.<span class="property">onmouseout</span> = mouseoutHandle;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//此位置.按钮的点击事件的外面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">mouseoverHandle</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;yellow&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">mouseoutHandle</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="7-4-innerHTML和createElement-的比较"><a href="#7-4-innerHTML和createElement-的比较" class="headerlink" title="7.4 innerHTML和createElement()的比较"></a>7.4 innerHTML和createElement()的比较</h3><pre><code>就innerHTML这种采用字符串拼接生成dom的方式更加方便，并且效率更高。

但是那原生的createElement又有什么优势呢？

1.createElement，当元素插入后仍然保留对dom元素的指针。而innerHTML插入后，并没有对dom元素的指针，你需要再通过getElementById重新选取。

2.createElement能够获得事件处理函数，而innerHTML生成的新dom无法获得原先设置的事件处理函数。
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">       <span class="comment">//1.设置div的innerHTML</span></span><br><span class="line">       <span class="keyword">var</span> str = <span class="string">&quot;&lt;div id=&#x27;inner&#x27; style=&#x27;width:100px;height:100px;background-color: red&#x27;&gt;&lt;/div&gt;&quot;</span>;</span><br><span class="line">       <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerHTML</span> = str;</span><br><span class="line">       <span class="comment">//2.绑定事件</span></span><br><span class="line">       <span class="title function_">my$</span>(<span class="string">&quot;inner&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">           <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;有&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//3.重新设置之后，发现之前绑定的事件没了</span></span><br><span class="line">       <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerHTML</span> = str;</span><br><span class="line">   &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<pre><code>3.某些情况下，createElement更加快速。比如如果你需要反复操作字符串，在每次处理后再次插入。每次插入都将进行解析与制作dom，在性能上会很差。
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下面代码性能很差，因为字符串的拼接耗时</span></span><br><span class="line"><span class="keyword">var</span> staDate = <span class="keyword">new</span> <span class="title class_">Date</span>(); </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)&#123; </span><br><span class="line">	<span class="keyword">var</span> str=<span class="string">&quot;&lt;div id=&#x27;div_&#x27;&quot;</span>+i+<span class="string">&quot;&#x27; style=&#x27;width:100px; height:20px;background-color:#eee&#x27;&gt;test&lt;/div&gt;&quot;</span>; </span><br><span class="line">	<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerHTML</span> += str; </span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">new</span> <span class="title class_">Date</span> - staDate); <span class="comment">//18</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当有大量字符串拼接的时候createElement效率更高</span></span><br><span class="line"><span class="keyword">var</span> staDate = <span class="keyword">new</span> <span class="title class_">Date</span>(); </span><br><span class="line"><span class="keyword">var</span> doc = <span class="variable language_">window</span>.<span class="property">document</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)&#123; </span><br><span class="line">	<span class="keyword">var</span> oDiv = doc.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>); </span><br><span class="line">	<span class="keyword">var</span> oText = doc.<span class="title function_">createTextNode</span>(<span class="string">&quot;text&quot;</span>); </span><br><span class="line">	oDiv.<span class="title function_">appendChild</span>(oText); </span><br><span class="line">	<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="title function_">appendChild</span>(oDiv); </span><br><span class="line">	oDiv.<span class="property">style</span>.<span class="property">id</span> = <span class="string">&quot;div_&quot;</span>+i; </span><br><span class="line">	oDiv.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&quot;100px&quot;</span>; </span><br><span class="line">	oDiv.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&quot;20px&quot;</span>; </span><br><span class="line">	oDiv.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;#eee&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">new</span> <span class="title class_">Date</span> - staDate);  <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试2 ： createElement效率</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">        <span class="keyword">var</span> staDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> n = <span class="number">0</span>; n &lt; <span class="number">1000</span>; n ++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> e = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">            e.<span class="property">href</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            e.<span class="property">innerText</span> = <span class="string">&#x27;测试&#x27;</span> + n;</span><br><span class="line">            <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="title function_">appendChild</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="keyword">new</span> <span class="title class_">Date</span> - staDate);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试2 ： innerHTML效率，使用数组的方式避免字符串的大量拼接</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> staDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> buf = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">for</span> (<span class="keyword">var</span> n = <span class="number">0</span>; n &lt; <span class="number">1000</span>; n ++)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            buf.<span class="title function_">push</span>(<span class="string">&#x27;&lt;a href=&quot;&quot;&gt;测试&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            buf.<span class="title function_">push</span>(n);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            buf.<span class="title function_">push</span>(<span class="string">&#x27;&lt;/a&gt;&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerHTML</span> = buf.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">alert</span>(<span class="keyword">new</span> <span class="title class_">Date</span> - staDate);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//此时可以发现两种方式的性能差距不是特别大</span></span><br></pre></td></tr></table></figure>

<p>4.可读性与可维护上createElement会优秀一些</p>
<h2 id="8-事件详解"><a href="#8-事件详解" class="headerlink" title="8. 事件详解"></a>8. 事件详解</h2><h3 id="8-1-注册-x2F-移除事件的三种方式"><a href="#8-1-注册-x2F-移除事件的三种方式" class="headerlink" title="8.1 注册&#x2F;移除事件的三种方式"></a>8.1 注册&#x2F;移除事件的三种方式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击后执行&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">box.<span class="property">onclick</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">//使用onclick缺点：只能有一个事件</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//为元素绑定事件</span></span><br><span class="line">对象.<span class="title function_">addEventListener</span>(<span class="string">&quot;事件类型&quot;</span>,事件处理函数,<span class="literal">false</span>);   <span class="comment">//谷歌和火狐支持,IE8不支持</span></span><br><span class="line">对象.<span class="title function_">attachEvent</span>(<span class="string">&quot;有on的事件类型&quot;</span>,事件处理函数);        <span class="comment">//谷歌不支持,火狐不支持,IE8支持</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//为按钮绑定点击事件  addEventListener</span></span><br><span class="line"><span class="comment">//参数1:事件的类型---事件的名字,没有on</span></span><br><span class="line"><span class="comment">//参数2:事件处理函数---函数(命名函数,匿名函数)</span></span><br><span class="line"><span class="comment">//参数3:布尔类型,目前就写false(表示事件的阶段)</span></span><br><span class="line"><span class="comment">//为同一个元素绑定多个相同的事件--</span></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;猥琐啊&quot;</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;龌龊啊&quot;</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;邪恶啊&quot;</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;下流啊&quot;</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//参数1:事件类型---事件名字，有on  attachEvent</span></span><br><span class="line"><span class="comment">//参数2:事件处理函数---函数(命名函数,匿名函数)</span></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="title function_">attachEvent</span>(<span class="string">&quot;onclick&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;好帅哦1&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="title function_">attachEvent</span>(<span class="string">&quot;onclick&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;好帅哦2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="title function_">attachEvent</span>(<span class="string">&quot;onclick&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;好帅哦3&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="8-2-绑定事件的兼容代码"><a href="#8-2-绑定事件的兼容代码" class="headerlink" title="8.2 绑定事件的兼容代码"></a>8.2 绑定事件的兼容代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//绑定事件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addEventListener</span>(<span class="params">element, type, fn</span>) &#123;</span><br><span class="line">  <span class="comment">//火狐 谷歌</span></span><br><span class="line">  <span class="keyword">if</span> (element.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">    element.<span class="title function_">addEventListener</span>(type, fn, <span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//IE</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (element.<span class="property">attachEvent</span>)&#123;</span><br><span class="line">    element.<span class="title function_">attachEvent</span>(<span class="string">&#x27;on&#x27;</span> + type,fn);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//正常情况</span></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    element[<span class="string">&#x27;on&#x27;</span>+type] = fn;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//解绑事件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">removeEventListener</span>(<span class="params">element, type, fn</span>) &#123;</span><br><span class="line">  <span class="comment">//火狐 谷歌</span></span><br><span class="line">  <span class="keyword">if</span> (element.<span class="property">removeEventListener</span>) &#123;</span><br><span class="line">    element.<span class="title function_">removeEventListener</span>(type, fn, <span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//IE</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (element.<span class="property">detachEvent</span>) &#123;</span><br><span class="line">    element.<span class="title function_">detachEvent</span>(<span class="string">&#x27;on&#x27;</span> + type, fn);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//正常情况</span></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    element[<span class="string">&#x27;on&#x27;</span>+type] = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-addEventListener和attachEvent区别"><a href="#8-3-addEventListener和attachEvent区别" class="headerlink" title="8.3 addEventListener和attachEvent区别"></a>8.3 addEventListener和attachEvent区别</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//相同点: 都可以为元素绑定事件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//不同点:</span></span><br><span class="line">* <span class="number">1.</span>方法名不一样</span><br><span class="line">* <span class="number">2.</span>参数个数不一样addEventListener三个参数,attachEvent两个参数</span><br><span class="line">* <span class="number">3.</span>addEventListener 谷歌,火狐,<span class="title class_">IE11</span>支持,<span class="title class_">IE8</span>不支持</span><br><span class="line">*   attachEvent 谷歌火狐不支持,<span class="title class_">IE11</span>不支持,<span class="title class_">IE8</span>支持</span><br><span class="line">* <span class="number">4.</span><span class="variable language_">this</span>不同,addEventListener 中的<span class="variable language_">this</span>是当前绑定事件的对象</span><br><span class="line">*   attachEvent中的<span class="variable language_">this</span>是<span class="variable language_">window</span>。(<span class="title class_">IE8</span>中其实通过apply、call改变了<span class="variable language_">this</span>的指向)</span><br><span class="line">* <span class="number">5.</span>addEventListener中事件的类型(事件的名字)没有on</span><br><span class="line">*   attachEvent中的事件的类型(事件的名字)有on</span><br></pre></td></tr></table></figure>

<h3 id="8-4-事件对象"><a href="#8-4-事件对象" class="headerlink" title="8.4 事件对象"></a>8.4 事件对象</h3><p>Event接口表示在DOM中发生的任何事件，一些是用户生成的（例如鼠标或键盘事件），而其他由API生成。 每一个事件的生成都有一个event对象，这个对象中包含该事件的类型、触发者、触发位置等信息</p>
<ul>
<li>event.type 获取事件类型</li>
<li>event.target || event.srcElement 用于获取触发事件的元素</li>
<li>clientX&#x2F;clientY     所有浏览器都支持，可视区位置</li>
<li>pageX&#x2F;pageY       IE8以前不支持，页面位置</li>
<li>event.preventDefault() 取消默认行为</li>
<li>event.stopPropagation() 阻止事件传播</li>
<li>获取键盘按键信息</li>
</ul>
<h4 id="8-4-1-事件三要素"><a href="#8-4-1-事件三要素" class="headerlink" title="8.4.1 事件三要素"></a>8.4.1 事件三要素</h4><ul>
<li>事件源 : 触发(被)事件的元素</li>
<li>事件类型 : 事件的触发方式(例如鼠标点击或键盘点击)</li>
<li>事件处理程序 : 事件触发后要执行的代码(函数形式)</li>
</ul>
<h4 id="8-4-2-event对象的获取"><a href="#8-4-2-event对象的获取" class="headerlink" title="8.4.2 event对象的获取"></a>8.4.2 event对象的获取</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//事件参数e在IE8的浏览器中是不存在,此时用window.event来代替</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//兼容性写法：</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> event = e||<span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">target</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-4-3-event-type的使用"><a href="#8-4-3-event-type的使用" class="headerlink" title="8.4.3 event.type的使用"></a>8.4.3 event.type的使用</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;呵呵&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = f1;</span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onmouseover</span> = f1;</span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onmouseout</span> = f1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params">e</span>) &#123;</span><br><span class="line">	<span class="keyword">switch</span> (e.<span class="property">type</span>) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&quot;click&quot;</span>:</span><br><span class="line">			<span class="title function_">alert</span>(<span class="string">&quot;好帅哦&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&quot;mouseover&quot;</span>:</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&quot;mouseout&quot;</span>:</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;green&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-4-4-keyCode的使用"><a href="#8-4-4-keyCode的使用" class="headerlink" title="8.4.4 keyCode的使用"></a>8.4.4 keyCode的使用</h4><pre><code>案例1：ctrl+回车发布留言
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> <span class="variable constant_">HTML</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;无标题文档&lt;/title&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.onload=function ()</span><br><span class="line">&#123;</span><br><span class="line">	var oTxt1=document.getElementById(&#x27;txt1&#x27;);</span><br><span class="line">	var oTxt2=document.getElementById(&#x27;txt2&#x27;);</span><br><span class="line">	</span><br><span class="line">	oTxt1.onkeydown=function (ev)</span><br><span class="line">	&#123;</span><br><span class="line">		var oEvent=ev||event;</span><br><span class="line">		// ctrlKey表示ctrl键，shiftKey表示shift键</span><br><span class="line">		if(oEvent.keyCode==13 &amp;&amp; oEvent.ctrlKey)</span><br><span class="line">		&#123;</span><br><span class="line">			oTxt2.value+=oTxt1.value+&#x27;\n&#x27;;</span><br><span class="line">			oTxt1.value=&#x27;&#x27;;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;input id=&quot;txt1&quot; type=&quot;text&quot; /&gt;&lt;br&gt;</span><br><span class="line">&lt;textarea id=&quot;txt2&quot; rows=&quot;10&quot; cols=&quot;40&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>案例2：只能输入数字的文本框
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> <span class="variable constant_">HTML</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;无标题文档&lt;/title&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	var txt1 = my$(&quot;txt1&quot;);</span><br><span class="line">	//键盘按下，此时通过this.value获取的内容仍然是之前的内容</span><br><span class="line">	//onkeydown先于oninput执行</span><br><span class="line">	//onkeydown方法执行的时候不能获取到最新的value信息</span><br><span class="line">	txt1.onkeydown = function(e)&#123;</span><br><span class="line">		var event = e||window.event;</span><br><span class="line">		//条件是只能输入数字  48 ~ 57 之间</span><br><span class="line">		//0 --&gt;48</span><br><span class="line">		//会推荐是 8</span><br><span class="line">		//只能输入数字  ： 只要输入的东西不是退格键 以及 &lt;48  &gt;57 我们都认为不可以输入 ,返回 false</span><br><span class="line">		if(event.keyCode != 8 &amp;&amp; (event.keyCode &lt; 48 || event.keyCode &gt; 57))&#123;</span><br><span class="line">			//当返回false不会更新input的value值</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		else&#123;</span><br><span class="line">			//当返回true会更新input的value值</span><br><span class="line">			return true;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//是否是中文输入法</span><br><span class="line">	var cpLock = false;</span><br><span class="line">	//中文输入法开始</span><br><span class="line">	document.addEventListener(&#x27;compositionstart&#x27;, function(e) &#123;</span><br><span class="line">	   cpLock = true;</span><br><span class="line">	&#125;);</span><br><span class="line">	//中文输入法结束(空格或者回车键)</span><br><span class="line">	document.addEventListener(&#x27;compositionend&#x27;, function(e) &#123;		</span><br><span class="line">	   cpLock = false;</span><br><span class="line">	&#125;)</span><br><span class="line">	//oninput后与onkeydown执行，可以获取到input最新的value信息</span><br><span class="line">	txt1.oninput = function()&#123;</span><br><span class="line">		if(cpLock)&#123;</span><br><span class="line">			//把this.value中所有出现的A-Z/a-z都换成空字符串</span><br><span class="line">			this.value = this.value.replace(/[A-Za-z]/g,&quot;&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; id=&quot;txt1&quot; /&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="8-4-5-clientX和clientY"><a href="#8-4-5-clientX和clientY" class="headerlink" title="8.4.5 clientX和clientY"></a>8.4.5 clientX和clientY</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//clientX和clientY代表可视区的位置</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">ev</span>)&#123;</span><br><span class="line">	<span class="comment">//兼容的写法</span></span><br><span class="line">	<span class="keyword">var</span> oev = ev||event;</span><br><span class="line">	<span class="title function_">alert</span>(oev.<span class="property">clientX</span>+<span class="string">&quot;,&quot;</span>+oev.<span class="property">clientY</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/media/3.png" alt="1498743216279"></p>
<h4 id="8-4-6-PageX和PageY"><a href="#8-4-6-PageX和PageY" class="headerlink" title="8.4.6 PageX和PageY"></a>8.4.6 PageX和PageY</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//PageX和PageY : 页面的位置，包含滚动出去的页面</span></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">      <span class="attr">margin</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attr">height</span>: 1000px;</span><br><span class="line">	&#125;</span><br><span class="line">	 #box &#123;</span><br><span class="line">      <span class="attr">margin</span>: 100px;</span><br><span class="line">      margin-<span class="attr">top</span>: 500px;</span><br><span class="line">      <span class="attr">width</span>: 200px;</span><br><span class="line">      <span class="attr">height</span>: 200px;</span><br><span class="line">      background-<span class="attr">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">    box.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">      e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 获取的鼠标在浏览器的可视区域的坐标</span></span><br><span class="line">      <span class="comment">// console.log(e.clientX);</span></span><br><span class="line">      <span class="comment">// console.log(e.clientY);</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 鼠标在当前页面的位置</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">pageX</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">pageY</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>案例：让img跟随鼠标移动</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;images/tianshi.gif&quot;</span> id=<span class="string">&quot;ts&quot;</span> alt=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">body</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">1000px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-id">#ts</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> ts = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ts&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// ts.style.left = e.clientX - 10 + &#x27;px&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// ts.style.top = e.clientY - 10 + &#x27;px&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ts.<span class="property">style</span>.<span class="property">left</span> = e.<span class="property">pageX</span> - <span class="number">10</span> + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ts.<span class="property">style</span>.<span class="property">top</span> = e.<span class="property">pageY</span> - <span class="number">10</span> + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="8-4-7-PageX和PageY的兼容性处理"><a href="#8-4-7-PageX和PageY的兼容性处理" class="headerlink" title="8.4.7 PageX和PageY的兼容性处理"></a>8.4.7 PageX和PageY的兼容性处理</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.clientX/clientY</span></span><br><span class="line"><span class="comment">//e.clientX/e.clientY   鼠标在可视区域中的位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.pageX/pageY</span></span><br><span class="line"><span class="comment">//e.pageX/e.pageY       鼠标在页面中的位置 有兼容性问题  从IE9以后才支持</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//3.最终方案：pageY = clientY + 页面滚动出去的距离</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.页面滚动出去的距离</span></span><br><span class="line"><span class="comment">//console.log(document.body.scrollLeft);</span></span><br><span class="line"><span class="comment">//console.log(document.body.scrollTop);</span></span><br><span class="line"><span class="comment">//但是有些浏览器 是使用document.documentElement来获取的滚动出去的距离的</span></span><br><span class="line"><span class="comment">//console.log(document.documentElement.scrollLeft);</span></span><br><span class="line"><span class="comment">//console.log(document.documentElement.scrollTop);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.获取鼠标在页面的位置，处理浏览器兼容性</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getScroll</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> scrollLeft = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollLeft</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollLeft</span>;</span><br><span class="line">  <span class="keyword">var</span> scrollTop = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">scrollLeft</span>: scrollLeft,</span><br><span class="line">    <span class="attr">scrollTop</span>: scrollTop</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getPage</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line">  <span class="keyword">var</span> pageX = e.<span class="property">pageX</span> || (e.<span class="property">clientX</span> + <span class="title function_">getScroll</span>().<span class="property">scrollLeft</span>);</span><br><span class="line">  <span class="keyword">var</span> pageY = e.<span class="property">pageY</span> || (e.<span class="property">clientY</span> + <span class="title function_">getScroll</span>().<span class="property">scrollTop</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">pageX</span>: pageX,</span><br><span class="line">    <span class="attr">pageY</span>: pageY</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-4-8-阻止事件传播的方式"><a href="#8-4-8-阻止事件传播的方式" class="headerlink" title="8.4.8 阻止事件传播的方式"></a>8.4.8 阻止事件传播的方式</h4><pre><code>    事件传递 : 多个元素嵌套,有层次关系,这些元素都注册了相同的事件,如果里面的元素的事件触发了,外面的元素的该事件自动的触发了。
</code></pre>
<h5 id="a-为什么有事件传播："><a href="#a-为什么有事件传播：" class="headerlink" title="a) 为什么有事件传播："></a>a) 为什么有事件传播：</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//事件可以分为三个阶段</span></span><br><span class="line">* <span class="number">1.</span>事件捕获阶段  : 从外向内</span><br><span class="line">* <span class="number">2.</span>事件目标阶段  : 最开始选择的那个</span><br><span class="line">* <span class="number">3.</span>事件冒泡阶段  : 从里向外</span><br><span class="line"></span><br><span class="line"><span class="comment">//为元素绑定事件</span></span><br><span class="line">* <span class="title function_">addEventListener</span>(<span class="string">&quot;没有on的事件类型&quot;</span>,事件处理函数,控制事件阶段的)</span><br><span class="line"></span><br><span class="line"><span class="comment">//addEventListener中第三个参数是控制事件阶段的</span></span><br><span class="line">* 通过e.<span class="property">eventPhase</span>这个属性可以知道当前的事件是什么阶段</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果e.eventPhase这个属性的值是:</span></span><br><span class="line">* <span class="number">1</span>----&gt;捕获阶段</span><br><span class="line">* <span class="number">2</span>----&gt;目标阶段</span><br><span class="line">* <span class="number">3</span>----&gt;冒泡</span><br><span class="line"></span><br><span class="line"><span class="comment">//一般默认都是冒泡阶段,很少用捕获阶段</span></span><br><span class="line">* 捕获阶段:从外向内</span><br><span class="line">* 冒泡阶段:从里向外</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;dv1&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//事件冒泡:是从里向外</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//同时注册点击事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> objs = [<span class="title function_">my$</span>(<span class="string">&quot;dv3&quot;</span>), <span class="title function_">my$</span>(<span class="string">&quot;dv2&quot;</span>), <span class="title function_">my$</span>(<span class="string">&quot;dv1&quot;</span>)];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//遍历注册事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  objs.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">ele</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//为每个元素绑定事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ele.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">id</span>+<span class="string">&quot;====&gt;&quot;</span>+e.<span class="property">eventPhase</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;, <span class="literal">true</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在addEventListener函数最后一个参数是true或者false情况下，我们可以看到打印结果的变化</span></span><br></pre></td></tr></table></figure>

<h5 id="b-如何阻止事件传播"><a href="#b-如何阻止事件传播" class="headerlink" title="b) 如何阻止事件传播"></a>b) 如何阻止事件传播</h5><ul>
<li>标准方式 event.stopPropagation();  谷歌和火狐支持</li>
<li>event.cancelBubble &#x3D; true; 标准中已废弃   IE特有的,谷歌支持,火狐不支持</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params">e</span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;fun1&quot;</span>);</span><br><span class="line">	<span class="comment">//w3c标准</span></span><br><span class="line">	<span class="keyword">if</span>(e&amp;&amp;e.<span class="property">stopPropagation</span>)&#123;</span><br><span class="line">		e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//ie</span></span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">cancelBubble</span> = <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-4-9-阻止默认事件"><a href="#8-4-9-阻止默认事件" class="headerlink" title="8.4.9 阻止默认事件"></a>8.4.9 阻止默认事件</h4><p>非IE    e.preventDefault()</p>
<p>IE        event.returnValue &#x3D; true;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;http://www.baidu.com&quot;</span> onclick=<span class="string">&quot;fn(event)&quot;</span>&gt;点击我吧&lt;/a&gt;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">e</span>)&#123;</span><br><span class="line">	<span class="comment">//查看e是否存在preventDefault方法</span></span><br><span class="line">	<span class="comment">//火狐浏览器(w3c标准)</span></span><br><span class="line">	<span class="keyword">if</span>(e&amp;&amp;e.<span class="property">preventDefault</span>)&#123;</span><br><span class="line">		<span class="comment">//阻止默认行为</span></span><br><span class="line">		e.<span class="title function_">preventDefault</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//ie浏览器(后期版本的ie也遵从了w3c规范)</span></span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">returnValue</span> = <span class="literal">true</span>;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>案例：点击图片切换照片</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;a id=<span class="string">&quot;ak&quot;</span> href=<span class="string">&quot;images/1.jpg&quot;</span>&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1-small.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;im&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;im&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">src</span>=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;ak&quot;</span>).<span class="property">href</span>;</span><br><span class="line">    <span class="keyword">if</span>(e&amp;&amp;e.<span class="property">preventDefault</span>)&#123;</span><br><span class="line">		<span class="comment">//阻止默认行为</span></span><br><span class="line">		e.<span class="title function_">preventDefault</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//ie浏览器(后期版本的ie也遵从了w3c规范)</span></span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">returnValue</span> = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>案例：美女相册</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  美女画廊</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;imagegallery&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;images/1.jpg&quot;</span> <span class="attr">title</span>=<span class="string">&quot;美女A&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   	 	<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1-small.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;美女1&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  	<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;images/2.jpg&quot;</span> <span class="attr">title</span>=<span class="string">&quot;美女B&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	 <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/2-small.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;美女2&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  	 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;images/3.jpg&quot;</span> <span class="attr">title</span>=<span class="string">&quot;美女C&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/3-small.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;美女3&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  	 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;images/4.jpg&quot;</span> <span class="attr">title</span>=<span class="string">&quot;美女D&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     	<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/4-small.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;美女4&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"> 	 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;clear:both&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;!--显示大图的--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;image&quot;</span> <span class="attr">src</span>=<span class="string">&quot;images/placeholder.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">width</span>=<span class="string">&quot;450&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;des&quot;</span>&gt;</span>选择一个图片<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//点击a标签,把a标签中的href的属性值给id为image的src属性</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//把a的title属性的值给id为des的p标签赋值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//从ul中标签获取获取所有的a标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> aObjs=<span class="title function_">my$</span>(<span class="string">&quot;imagegallery&quot;</span>).<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;a&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//循环遍历所有的a标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;aObjs.<span class="property">length</span>;i++)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//为每个a标签注册点击事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    aObjs[i].<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//为id为image的标签的src赋值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;image&quot;</span>).<span class="property">src</span>=<span class="variable language_">this</span>.<span class="property">href</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//为p标签赋值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;des&quot;</span>).<span class="property">innerText</span>=<span class="variable language_">this</span>.<span class="property">title</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//阻止超链接默认的跳转</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="8-4-10-事件委派"><a href="#8-4-10-事件委派" class="headerlink" title="8.4.10 事件委派"></a>8.4.10 事件委派</h4><h5 id="a-代理机制"><a href="#a-代理机制" class="headerlink" title="a) 代理机制"></a>a) 代理机制</h5><pre><code>代理是一种常用的设计模式，代理模式可以对原有的类进行扩展，即通过代理对象的模式来访问目标类。最通俗的例子就是假设我们想邀请一位明星,那么并不是直接连接明星,而是联系明星的经纪人,来达到同样的目的。明星就是一个目标对象,他只要负责活动中的节目,而其他琐碎的事情就交给他的代理人(经纪人)来解决.这就是代理思想在现实中的一个例子。

代理的好处：

1.限制对象的访问权限

2.在不改变目标对象代码的基础上为它动态的添加功能
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"> 	<span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>)&#123;</span><br><span class="line"> 		<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line"> 		<span class="variable language_">this</span>.<span class="property">talkBusiness</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"> 			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>+<span class="string">&quot;谈了1个亿的生意&quot;</span>);</span><br><span class="line"> 		&#125;</span><br><span class="line"> 	&#125;</span><br><span class="line"></span><br><span class="line"> 	<span class="keyword">function</span> <span class="title function_">Agent</span>(<span class="params">name,p</span>)&#123;</span><br><span class="line"> 		<span class="variable language_">this</span>.<span class="property">p</span> = p;</span><br><span class="line"> 		<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line"> 		<span class="variable language_">this</span>.<span class="property">talkBusiness</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"> 			<span class="comment">//目标对象的目标方法之前做的事情</span></span><br><span class="line"> 			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;谈生意之前制定计划&quot;</span>);</span><br><span class="line"> 			<span class="comment">//目标对象调用目标方法</span></span><br><span class="line"> 			<span class="variable language_">this</span>.<span class="property">p</span>.<span class="title function_">talkBusiness</span>();</span><br><span class="line"> 			<span class="comment">//目标对象的目标方法之后做的事情</span></span><br><span class="line"> 			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;谈生意之后做总结&quot;</span>);</span><br><span class="line"> 		&#125;</span><br><span class="line"> 	&#125;</span><br><span class="line"></span><br><span class="line"> 	<span class="comment">//目标对象</span></span><br><span class="line"> 	<span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;成龙&quot;</span>);</span><br><span class="line"> 	<span class="comment">//代理对象</span></span><br><span class="line"> 	<span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title class_">Agent</span>(<span class="string">&quot;华谊传媒&quot;</span>,p);</span><br><span class="line"> 	a.<span class="title function_">talkBusiness</span>();</span><br><span class="line">&lt;/script&gt; </span><br></pre></td></tr></table></figure>



<h5 id="b-练习"><a href="#b-练习" class="headerlink" title="b) 练习"></a>b) 练习</h5><pre><code>1、小明(Person类)刚到上海工作，住在公司宿舍，由于刚入职，工作繁忙没有空余时间，他就委托中山房产中介公司(Agent类)和他的朋友小张(Friend类)找房子。

他每天给中介公司或小张打电话，询问有没有合适的房源。他的心理价位是1000元每月。（即小于等于1000的时候，即找到房子）

中介公司周一至周六工作，每天能找到的一处房源的价格800~3000随机

小张周日帮他找，每天能找到一处价格约500~4000的房子

编写程序，运行到找到房子。显示当天星期几，显示每天中介或者小张帮他找到房子的价格。
</code></pre>
<h5 id="c-事件委派的原理"><a href="#c-事件委派的原理" class="headerlink" title="c) 事件委派的原理"></a>c) 事件委派的原理</h5><pre><code>什么是事件委托：通俗的讲，事件委派就是onclick/onmouseover/onmouseout等事件委托别人来处理。

事件委派原理：利用冒泡的原理，把事件冒到父级上，触发执行效果。

事件委派好处：提高性能
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;menu&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;current&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;</span>商品<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;</span>博客<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;</span>相册<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;</span>帮助<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-id">#list</span> <span class="selector-tag">li</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">list-style-type</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">80px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">background-color</span>: beige;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">float</span>: left;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-id">#list</span> <span class="selector-tag">li</span><span class="selector-class">.current</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">background-color</span>: burlywood;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-id">#list</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">text-decoration</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.没有事件委派写法</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  //获取所有的li标签,</span><br><span class="line">  var liObjs=my$(&quot;list&quot;).getElementsByTagName(&quot;li&quot;);</span><br><span class="line">  //循环遍历,找到每个li中的a,注册点击事件</span><br><span class="line">  for(var i=0;i&lt;liObjs.length;i++)&#123;</span><br><span class="line">    //每个li中的a</span><br><span class="line">    var aObj=getFirstElement(liObjs[i]);</span><br><span class="line"></span><br><span class="line">    aObj.onclick=function () &#123;</span><br><span class="line">      //第一件事:把这个a所在的li的所有的兄弟元素的类样式全部移除</span><br><span class="line">      for(var j=0;j&lt;liObjs.length;j++)&#123;</span><br><span class="line">        liObjs[j].removeAttribute(&quot;class&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">      //第二件事:</span><br><span class="line">      //当前点击的a的父级元素li(点击的这个a所在的父级元素li),设置背景颜色</span><br><span class="line">      this.parentNode.className=&quot;current&quot;;</span><br><span class="line">      //第三件事：阻止超链接跳转</span><br><span class="line">	  if(e&amp;&amp;e.preventDefault)&#123;</span><br><span class="line">			//阻止默认行为</span><br><span class="line">			e.preventDefault();</span><br><span class="line">		&#125;</span><br><span class="line">		//ie浏览器(后期版本的ie也遵从了w3c规范)</span><br><span class="line">	   else&#123;</span><br><span class="line">			 window.event.returnValue = true;</span><br><span class="line">		     return false;</span><br><span class="line">		&#125;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//2.事件委派写法</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	  //获取所有的li标签,</span><br><span class="line">	  var list = my$(&quot;list&quot;);</span><br><span class="line">	  var liObjs=my$(&quot;list&quot;).getElementsByTagName(&quot;li&quot;);</span><br><span class="line">	  list.onclick = function(e)&#123;</span><br><span class="line">	  	  //第一件事:把这个a所在的li的所有的兄弟元素的类样式全部移除</span><br><span class="line">	      for(var j=0;j&lt;liObjs.length;j++)&#123;</span><br><span class="line">	        liObjs[j].removeAttribute(&quot;class&quot;);</span><br><span class="line">	      &#125;</span><br><span class="line">	      //第二件事：获取事件的触发者</span><br><span class="line">	      e = e||window.event;</span><br><span class="line">	      var target = e.target;</span><br><span class="line">	      target.parentNode.className=&quot;current&quot;;</span><br><span class="line"></span><br><span class="line">	      //第三件事：阻止超链接跳转</span><br><span class="line">	      if(e&amp;&amp;e.preventDefault)&#123;</span><br><span class="line">				 //阻止默认行为</span><br><span class="line">				 e.preventDefault();</span><br><span class="line">			  &#125;</span><br><span class="line">			  //ie浏览器(后期版本的ie也遵从了w3c规范)</span><br><span class="line">			  else&#123;</span><br><span class="line">				 window.event.returnValue = true;</span><br><span class="line">		         return false;</span><br><span class="line">			  &#125;;</span><br><span class="line">	  	  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="9-特效属性"><a href="#9-特效属性" class="headerlink" title="9. 特效属性"></a>9. 特效属性</h2><h3 id="9-1-偏移量"><a href="#9-1-偏移量" class="headerlink" title="9.1 偏移量"></a>9.1 偏移量</h3><ul>
<li>offsetParent   离当前元素最近的一个有定位属性的父节点的距离 。如果父亲都没有定位，返回body。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line"><span class="comment">//注意：通过box.style.width获取不到在style标签中设置的属性值(style属性中可以获取)，所以我们一般不通过box.style.width来获取属性值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">offsetParent</span>);  <span class="comment">//下面offsetLeft和offsetTop都是相当于这个offsetParent而言的</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">offsetLeft</span>);    <span class="comment">//获取元素到最近一个有定位属性的父节点的左边距离，如果没有定位的父亲，则相对于body</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">offsetTop</span>);     <span class="comment">//获取元素到最近一个有定位属性的父节点的上边距离</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">offsetWidth</span>);    <span class="comment">//绝对宽度，包含边框,不包括因overflow而未显示的部分，也就是其实际占据的宽度</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">offsetHeight</span>);   <span class="comment">//绝对高度，包含边框,不包括因overflow而未显示的部分，也就是其实际占据的高度</span></span><br></pre></td></tr></table></figure>

<p><img src="/media/1498743216279.png" alt="1498743216279"></p>
<h3 id="9-2-Client属性"><a href="#9-2-Client属性" class="headerlink" title="9.2 Client属性"></a>9.2 Client属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">clientLeft</span>);   <span class="comment">//左边框宽度</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">clientTop</span>);  <span class="comment">//顶边框宽度</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">clientWidth</span>); <span class="comment">//获取宽度，包括padding，但是不包括边框</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">clientHeight</span>);<span class="comment">//获取宽度，包括padding，但是不包括边框</span></span><br></pre></td></tr></table></figure>

<p><img src="/media/1498743269100.png" alt="1498743269100"></p>
<h3 id="9-3-滚动偏移"><a href="#9-3-滚动偏移" class="headerlink" title="9.3 滚动偏移"></a>9.3 滚动偏移</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">scrollLeft</span>)  <span class="comment">//左边滚动出去的距离</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">scrollTop</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">scrollWidth</span>)  <span class="comment">//内容的大小，包括padding 和未显示的内容，不包括滚动条</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">scrollHeight</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/media/1498743288621.png" alt="1498743288621"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line">    小明跟小华到动物园玩，进门时，小明指着小华对看门人说：“看清楚喔！等会儿出来，别说我偷了你们的猴子！” </span><br><span class="line">&lt;/div&gt;</span><br><span class="line">  </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">body</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-id">#box</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">margin</span>: <span class="number">50px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">border</span>: <span class="number">30px</span> solid red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">background-color</span>: green;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">overflow</span>: auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 当拖动box中的滚动条的时候触发</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    box.<span class="property">onscroll</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">scrollLeft</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">scrollTop</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 内容的大小，包括padding 和未显示的内容，不包括滚动条</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// console.log(box.scrollWidth);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// console.log(box.scrollHeight);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 元素的大小 + padding   不包括滚动条</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// console.log(box.clientWidth);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// console.log(box.clientHeight);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="9-4-宽度的总结"><a href="#9-4-宽度的总结" class="headerlink" title="9.4 宽度的总结"></a>9.4 宽度的总结</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实际内容的宽高</span></span><br><span class="line">style.<span class="property">width</span>         <span class="comment">//返回元素的宽度（包括元素宽度，不包括内边距、边框和外边距）</span></span><br><span class="line">style.<span class="property">height</span>       <span class="comment">//返回元素的高度（包括元素高度，不包括内边距、边框和外边距）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//边框及边框以内</span></span><br><span class="line">offsetWidth       <span class="comment">//返回元素的宽度（包括元素宽度、内边距和边框，不包括外边距）</span></span><br><span class="line">offsetHeight      <span class="comment">//返回元素的高度（包括元素高度、内边距和边框，不包括外边距）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//边框以内</span></span><br><span class="line">clientWidth        <span class="comment">//返回元素的宽度（包括元素宽度、内边距，不包括边框和外边距）</span></span><br><span class="line">clientHeight       <span class="comment">//返回元素的高度（包括元素高度、内边距，不包括边框和外边距）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//滚动出去的</span></span><br><span class="line">scrollWidth       <span class="comment">//返回元素的宽度（包括元素宽度、内边距和溢出尺寸，不包括边框和外边距），无溢出的情况，与clientWidth相同</span></span><br><span class="line">scrollHeigh       <span class="comment">//返回元素的高度（包括元素高度、内边距和溢出尺寸，不包括边框和外边距），无溢出的情况，与clientHeight相同</span></span><br></pre></td></tr></table></figure>

<h3 id="9-5-案例"><a href="#9-5-案例" class="headerlink" title="9.5 案例"></a>9.5 案例</h3><p>1.拖拽注册框，点击x关闭</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;register&quot;</span>&gt;</span>注册信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;d-box&quot;</span> <span class="attr">id</span>=<span class="string">&quot;d_box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hd&quot;</span> <span class="attr">id</span>=<span class="string">&quot;drop&quot;</span>&gt;</span>注册信息 (可以拖拽)</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;box_close&quot;</span>&gt;</span>【关闭】<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bd&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        * &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.nav</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">background</span>: <span class="number">#036663</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#369</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">padding-left</span>: <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.nav</span> <span class="selector-tag">a</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">text-decoration</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.d-box</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#eee</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">#666</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">top</span>: <span class="number">40%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">left</span>: <span class="number">40%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">background-color</span>: white;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="comment">/* 不让文字被选中 */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            -webkit-user-select:none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            -moz-user-select:none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            -ms-user-select:none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            user-select:none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.hd</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">25px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">background-color</span>: <span class="number">#7c9299</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#369</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">line-height</span>: <span class="number">25px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">color</span>: white;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">cursor</span>: move;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-id">#box_close</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">float</span>: right;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">cursor</span>: pointer;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;d_box&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> drop = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;drop&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//1.只有点击drop才可以拖动，所以给drop添加onmousedown事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    drop.<span class="property">onmousedown</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 兼容性处理</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2.当鼠标按下的时候，求鼠标在盒子中的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 鼠标在盒子中的位置 = 鼠标在页面上的位置 - 盒子的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> x = <span class="title function_">getPage</span>(e).<span class="property">pageX</span> - box.<span class="property">offsetLeft</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> y = <span class="title function_">getPage</span>(e).<span class="property">pageY</span> - box.<span class="property">offsetTop</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 3.鼠标按住不放 同时 鼠标在文档中移动，此时可以拖动box</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 当鼠标在页面上移动的时候。求盒子的坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// 盒子的坐标 = 鼠标当前在页面中的位置 - 鼠标在盒子中的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> boxX = <span class="title function_">getPage</span>(e).<span class="property">pageX</span> - x;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> boxY = <span class="title function_">getPage</span>(e).<span class="property">pageY</span> - y;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            box.<span class="property">style</span>.<span class="property">left</span> = boxX + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            box.<span class="property">style</span>.<span class="property">top</span> = boxY + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//4.当鼠标弹起的时候，移除鼠标移动事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="property">onmouseup</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="literal">null</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//5.点击关闭按钮，隐藏盒子</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> box_close = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box_close&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    box_close.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        box.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>案例2：弹出注册框，可拖拽</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;login-header&quot;</span>&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);&quot;</span>&gt;</span>点击，弹出登录框<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;login&quot; class=&quot;login&quot; &gt;</span><br><span class="line">    &lt;div id=&quot;title&quot; class=&quot;login-title&quot;&gt;登录会员</span><br><span class="line">        &lt;span&gt;&lt;a id=&quot;closeBtn&quot; href=&quot;javascript:void(0);&quot; class=&quot;close-login&quot;&gt;关闭&lt;/a&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;login-input-content&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;login-input&quot;&gt;</span><br><span class="line">            &lt;label&gt;用户名：&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; placeholder=&quot;请输入用户名&quot; name=&quot;info[username]&quot; id=&quot;username&quot; class=&quot;list-input&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;login-input&quot;&gt;</span><br><span class="line">            &lt;label&gt;登录密码：&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;password&quot; placeholder=&quot;请输入登录密码&quot; name=&quot;info[password]&quot; id=&quot;password&quot; class=&quot;list-input&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;loginBtn&quot; class=&quot;login-button&quot;&gt;&lt;a href=&quot;javascript:void(0);&quot; id=&quot;login-button-submit&quot;&gt;登录会员&lt;/a&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- 遮盖层 --&gt;</span><br><span class="line">&lt;div id=&quot;bg&quot; class=&quot;login-bg&quot; &gt;&lt;/div&gt; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">        .login-header &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">            text-align: center;</span><br><span class="line">            height: 30px;</span><br><span class="line">            font-size: 24px;</span><br><span class="line">            line-height: 30px;</span><br><span class="line">        &#125;</span><br><span class="line">        ul, li, ol, dl, dt, dd, div, p, span, h1, h2, h3, h4, h5, h6, a &#123;</span><br><span class="line">            padding: 0px;</span><br><span class="line">            margin: 0px;</span><br><span class="line">        &#125;</span><br><span class="line">        .login &#123;</span><br><span class="line">            width: 512px;</span><br><span class="line">            height: 280px;</span><br><span class="line">            position: absolute;</span><br><span class="line">            border: #ebebeb solid 1px;</span><br><span class="line">            left: 50%;</span><br><span class="line">            right: 50%;</span><br><span class="line">            background: #ffffff;</span><br><span class="line">            box-shadow: 0px 0px 20px #ddd;</span><br><span class="line">            z-index: 9999;</span><br><span class="line">            margin-left: -256px;</span><br><span class="line">            margin-top: 140px;</span><br><span class="line">            display: none;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-title &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">            margin: 10px 0px 0px 0px;</span><br><span class="line">            text-align: center;</span><br><span class="line">            line-height: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            font-size: 18px;</span><br><span class="line">            position: relative;</span><br><span class="line">            cursor: move;</span><br><span class="line">            -moz-user-select:none;/*火狐  用户无法再该文本块中选择文本*/</span><br><span class="line">            -webkit-user-select:none;/*webkit浏览器*/</span><br><span class="line">            -ms-user-select:none;/*IE10*/</span><br><span class="line">            -khtml-user-select:none;/*早期浏览器*/</span><br><span class="line">            user-select:none;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-input-content &#123;</span><br><span class="line">            margin-top: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-button &#123;</span><br><span class="line">            width: 50%;</span><br><span class="line">            margin: 30px auto 0px auto;</span><br><span class="line">            line-height: 40px;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            border: #ebebeb 1px solid;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-bg &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line">            position: fixed;</span><br><span class="line">            top: 0px;</span><br><span class="line">            left: 0px;</span><br><span class="line">            background: #000000;</span><br><span class="line">            filter: alpha(opacity=30);</span><br><span class="line">            -moz-opacity: 0.3;</span><br><span class="line">            -khtml-opacity: 0.3;</span><br><span class="line">            opacity: 0.3;</span><br><span class="line">            display: none;</span><br><span class="line">        &#125;</span><br><span class="line">        a &#123;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            color: #000000;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-button a &#123;</span><br><span class="line">            display: block;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-input input.list-input &#123;</span><br><span class="line">            float: left;</span><br><span class="line">            line-height: 35px;</span><br><span class="line">            height: 35px;</span><br><span class="line">            width: 350px;</span><br><span class="line">            border: #ebebeb 1px solid;</span><br><span class="line">            text-indent: 5px;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-input &#123;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            margin: 0px 0px 20px 0px;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-input label &#123;</span><br><span class="line">            float: left;</span><br><span class="line">            width: 90px;</span><br><span class="line">            padding-right: 10px;</span><br><span class="line">            text-align: right;</span><br><span class="line">            line-height: 35px;</span><br><span class="line">            height: 35px;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-title span &#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            font-size: 12px;</span><br><span class="line">            right: -20px;</span><br><span class="line">            top: -30px;</span><br><span class="line">            background: #ffffff;</span><br><span class="line">            border: #ebebeb solid 1px;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border-radius: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  // 显示登录框和遮盖层</span><br><span class="line">  var login = document.getElementById(&#x27;login&#x27;);</span><br><span class="line">  var bg = document.getElementById(&#x27;bg&#x27;);</span><br><span class="line">  //1 点击按钮，弹出登录框和遮盖层</span><br><span class="line">  var link = document.getElementById(&#x27;link&#x27;);</span><br><span class="line">  link.onclick = function () &#123;</span><br><span class="line">    login.style.display = &#x27;block&#x27;;</span><br><span class="line">    bg.style.display = &#x27;block&#x27;;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 2 点击关闭按钮，隐藏 登录框和遮盖层</span><br><span class="line">  var closeBtn = document.getElementById(&#x27;closeBtn&#x27;);</span><br><span class="line">  closeBtn.onclick = function () &#123;</span><br><span class="line">    // 隐藏 登录框和遮盖层</span><br><span class="line">    login.style.display = &#x27;none&#x27;;</span><br><span class="line">    bg.style.display = &#x27;none&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 3 拖拽</span><br><span class="line">  var title = document.getElementById(&#x27;title&#x27;);</span><br><span class="line">  title.onmousedown = function (e) &#123;</span><br><span class="line">    // 鼠标按下，求鼠标在盒子中的位置</span><br><span class="line">    var x = e.pageX - login.offsetLeft;</span><br><span class="line">    var y = e.pageY - login.offsetTop;</span><br><span class="line"></span><br><span class="line">    document.onmousemove = function (e) &#123;</span><br><span class="line">      // 鼠标移动的时候， 盒子的坐标</span><br><span class="line">      var loginX = e.pageX - x;</span><br><span class="line">      var loginY = e.pageY - y;</span><br><span class="line"></span><br><span class="line">      login.style.left = loginX + 256 + &#x27;px&#x27;;</span><br><span class="line">      login.style.top = loginY - 140 + &#x27;px&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  document.onmouseup = function () &#123;</span><br><span class="line">    // 移除鼠标移动的事件</span><br><span class="line">    document.onmousemove = null;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>案例：放大镜</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;box&quot;</span> id=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;small&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/small.png&quot;</span> <span class="attr">width</span>=<span class="string">&quot;350&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;big&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/big.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">* &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"> <span class="selector-class">.box</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">width</span>: <span class="number">350px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">margin</span>: <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="comment">/*big的宽度为400，但是big下的img宽度为800，设置了big的overflow为hidden，所以图片只看到一部分*/</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.big</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">width</span>: <span class="number">400px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">height</span>: <span class="number">400px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">left</span>: <span class="number">360px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">overflow</span>: hidden;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">display</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.big</span> <span class="selector-tag">img</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">border</span>:<span class="number">1px</span> solid red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="comment">/*遮盖层，鼠标移上去的时候显示的黄色小块*/</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.mask</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">width</span>: <span class="number">175px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">height</span>: <span class="number">175px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0.4</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">top</span>: <span class="number">0px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">left</span>: <span class="number">0px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">cursor</span>: move;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">display</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.small</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//找到box</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> box = <span class="title function_">my$</span>(<span class="string">&#x27;box&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//分别找到box下的smallBox和bigBox</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> smallBox = box.<span class="property">children</span>[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> bigBox = box.<span class="property">children</span>[<span class="number">1</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//找到smallImage  找到mask  找到bigImage</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> smallImage = smallBox.<span class="property">children</span>[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> mask = smallBox.<span class="property">children</span>[<span class="number">1</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> bigImage = bigBox.<span class="property">children</span>[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 1 鼠标经过的时候 显示 mask和bigBox ， 当鼠标离开box的时候隐藏mask和bigBox</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// mouseenter   mouseleave     不会触发事件冒泡</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// mouseover   mouseout        会触发事件冒泡</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  box.<span class="property">onmouseenter</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 显示 mask和bigBox </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    mask.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    bigBox.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  box.<span class="property">onmouseleave</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    mask.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    bigBox.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 2 当鼠标在盒子中移动的时候，让mask和鼠标一起移动</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  box.<span class="property">onmousemove</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 获取鼠标在盒子中的位置，就是mask的坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> maskX = <span class="title function_">getPage</span>(e).<span class="property">pageX</span> - box.<span class="property">offsetLeft</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> maskY = <span class="title function_">getPage</span>(e).<span class="property">pageY</span> - box.<span class="property">offsetTop</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 让鼠标出现在mask的中心点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    maskX = maskX - mask.<span class="property">offsetWidth</span> / <span class="number">2</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    maskY = maskY - mask.<span class="property">offsetHeight</span> / <span class="number">2</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 把mask限制到box中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    maskX = maskX &lt; <span class="number">0</span> ? <span class="number">0</span> : maskX;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    maskY = maskY &lt; <span class="number">0</span> ? <span class="number">0</span> : maskY;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    maskX = maskX &gt; box.<span class="property">offsetWidth</span> - mask.<span class="property">offsetWidth</span> ? box.<span class="property">offsetWidth</span> - mask.<span class="property">offsetWidth</span> : maskX;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    maskY = maskY &gt; box.<span class="property">offsetHeight</span> - mask.<span class="property">offsetHeight</span> ? box.<span class="property">offsetHeight</span> - mask.<span class="property">offsetHeight</span> : maskY;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    mask.<span class="property">style</span>.<span class="property">left</span> = maskX + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    mask.<span class="property">style</span>.<span class="property">top</span> = maskY + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 3 当mask移动的时候，让大图片移动</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 求 大图片移动的距离</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// mask移动的距离 / mask最大能够移动的距离  = 大图片移动的距离 / 大图片最大能够移动的距离</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// mask最大能够移动的距离</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> maskMax = box.<span class="property">offsetWidth</span> - mask.<span class="property">offsetWidth</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 大图片最大能够移动的距离</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> bigImageMax = bigImage.<span class="property">offsetWidth</span> - bigBox.<span class="property">offsetWidth</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> bigImageX = maskX * bigImageMax / maskMax;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> bigImageY = maskY * bigImageMax / maskMax;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    bigImage.<span class="property">style</span>.<span class="property">left</span> = -bigImageX + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    bigImage.<span class="property">style</span>.<span class="property">top</span> = -bigImageY + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>案例：模拟滚动条</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;box&quot;</span> id=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">       我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml">        我是文字内容，我是文字内容，我是文字内容，</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;scroll&quot;</span> <span class="attr">id</span>=<span class="string">&quot;scroll&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        * &#123;<span class="attribute">margin</span>: <span class="number">0</span>;<span class="attribute">padding</span>: <span class="number">0</span>;&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.box</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">500px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">margin</span>: <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">overflow</span>: hidden;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="comment">/* 不让文字被选中 */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            -webkit-user-select:none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            -moz-user-select:none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            -ms-user-select:none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            user-select:none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.content</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">18px</span> <span class="number">5px</span> <span class="number">5px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.scroll</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">18px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.bar</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">background-color</span>: red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">border-radius</span>:  <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">cursor</span>: pointer;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> box = <span class="title function_">my$</span>(<span class="string">&#x27;box&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> content = <span class="title function_">my$</span>(<span class="string">&#x27;content&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> scroll = <span class="title function_">my$</span>(<span class="string">&#x27;scroll&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> bar = <span class="title function_">my$</span>(<span class="string">&#x27;bar&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//1 根据内容的大小，计算滚动条的高度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//  滚动条的高度 / scroll的高度 = box的高度 / 内容的高度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// offsetHeight     元素的大小 + padding + border</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// clientHeight     元素的大小 + padding</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// scrollHeight     内容的大小 + padding</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 当内容的高度大于box的高度，再计算 滚动条的高度，否则的话滚动条的高度为0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> barHeight = <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (content.<span class="property">scrollHeight</span> &gt; box.<span class="property">clientHeight</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    barHeight = box.<span class="property">clientHeight</span> / content.<span class="property">scrollHeight</span> * scroll.<span class="property">clientHeight</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  bar.<span class="property">style</span>.<span class="property">height</span> = barHeight + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//2 让滚动条能够拖拽</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 2.1 当鼠标按下的时候，求鼠标在滚动条中的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  bar.<span class="property">onmousedown</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 鼠标在滚动条中的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> y = <span class="title function_">getPage</span>(e).<span class="property">pageY</span> - bar.<span class="property">offsetTop</span> - box.<span class="property">offsetTop</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 2.2 当鼠标在页面上移动的时候，求滚动条的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//求滚动条的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> barY = <span class="title function_">getPage</span>(e).<span class="property">pageY</span> - y - box.<span class="property">offsetTop</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 控制bar不能移出scroll</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        barY = barY &lt; <span class="number">0</span> ? <span class="number">0</span> : barY;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        barY = barY &gt; scroll.<span class="property">clientHeight</span> - bar.<span class="property">clientHeight</span> ? scroll.<span class="property">clientHeight</span> - bar.<span class="property">clientHeight</span> : barY;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        bar.<span class="property">style</span>.<span class="property">top</span> = barY + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//3 当拖拽滚动条的时候，改变内容的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 内容滚动的距离 / 内容最大能够滚动的距离 = 滚动条滚动的距离 / 滚动条最大能够滚动的距离</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 内容最大能够滚动的距离</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> contentMax = content.<span class="property">scrollHeight</span> - box.<span class="property">clientHeight</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 滚动条最大能够滚动的距离</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> barMax = scroll.<span class="property">clientHeight</span> - bar.<span class="property">clientHeight</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> contentY = barY / barMax * contentMax;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        content.<span class="property">style</span>.<span class="property">top</span> = -contentY + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">document</span>.<span class="property">onmouseup</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 移除鼠标移动的事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="literal">null</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="10-BOM"><a href="#10-BOM" class="headerlink" title="10. BOM"></a>10. BOM</h2><h3 id="10-1-BOM的概念"><a href="#10-1-BOM的概念" class="headerlink" title="10.1 BOM的概念"></a>10.1 BOM的概念</h3><pre><code>BOM(Browser Object Model) 是指浏览器对象模型，浏览器对象模型提供了独立于内容的、可以与浏览器窗口进行互动的对象结构。BOM由多个对象组成，其中代表浏览器窗口的Window对象是BOM的顶层对象，其他对象都是该对象的子对象。

我们在浏览器中的一些操作都可以使用BOM的方式进行编程处理，

比如：刷新浏览器、后退、前进、在浏览器中输入URL等
</code></pre>
<h3 id="10-2-BOM的顶级对象window"><a href="#10-2-BOM的顶级对象window" class="headerlink" title="10.2 BOM的顶级对象window"></a>10.2 BOM的顶级对象window</h3><pre><code>window是浏览器的顶级对象，当调用window下的属性和方法时，可以省略window
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window    皇上</span><br><span class="line">document  太监总管(document也是window中的对象)</span><br></pre></td></tr></table></figure>

<pre><code>注意：

window下一个特殊的属性 window.name
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//页面中所有内容都是window的</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="number">123</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line"><span class="comment">//window下本身就有一个name属性，他的值是空字符串，即使我们给他赋值一个数值，但他还是一个字符串（注意查看打印的颜色）</span></span><br><span class="line"><span class="comment">//这边其实打印的时候省略了console.log(window.name);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">123</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// ---&gt;console.log(window.age);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> top = <span class="string">&quot;top&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(top);<span class="comment">//这边打印出来的是Window，top本身是window的一个属性，不能被赋值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这里的this是&quot;</span>+<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f1</span>();   <span class="comment">//----&gt;window.f1();</span></span><br></pre></td></tr></table></figure>

<h3 id="10-3-对话框"><a href="#10-3-对话框" class="headerlink" title="10.3 对话框"></a>10.3 对话框</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">alert</span>(<span class="string">&quot;您好啊&quot;</span>);<span class="comment">//以后不用,测试的时候使用</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">prompt</span>(<span class="string">&quot;请输入帐号&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> result=<span class="variable language_">window</span>.<span class="title function_">confirm</span>(<span class="string">&quot;您确定退出吗&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br></pre></td></tr></table></figure>

<h3 id="10-4-页面加载事件"><a href="#10-4-页面加载事件" class="headerlink" title="10.4 页面加载事件"></a>10.4 页面加载事件</h3><ul>
<li>onload</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 当页面加载完成执行</span></span><br><span class="line">  <span class="comment">// 当页面完全加载所有内容（包括图像、脚本文件、CSS 文件等）执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>onunload</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onunload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 当用户退出页面时执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>onbeforeunload</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//页面关闭之前触发的</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onbeforeunload</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">     <span class="title function_">alert</span>(<span class="string">&quot;哈哈&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="10-5-location对象"><a href="#10-5-location对象" class="headerlink" title="10.5 location对象"></a>10.5 location对象</h3><p>location对象是window对象下的一个属性，时候的时候可以省略window对象</p>
<p>location可以获取或者设置浏览器地址栏的URL</p>
<h4 id="10-5-1-URL"><a href="#10-5-1-URL" class="headerlink" title="10.5.1 URL"></a>10.5.1 URL</h4><p>统一资源定位符 (Uniform Resource Locator, URL)</p>
<ul>
<li>URL的组成</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">scheme://host:port/path?query#fragment</span><br><span class="line">scheme:通信协议</span><br><span class="line">	常用的http,ftp,maito等</span><br><span class="line">host:主机</span><br><span class="line">	服务器(计算机)域名系统 (DNS) 主机名或 IP 地址。</span><br><span class="line">port:端口号</span><br><span class="line">	整数，可选，省略时使用方案的默认端口，如http的默认端口为80。</span><br><span class="line">path:路径</span><br><span class="line">	由零或多个&#x27;/&#x27;符号隔开的字符串，一般用来表示主机上的一个目录或文件地址。</span><br><span class="line">query:查询</span><br><span class="line">	可选，用于给动态网页传递参数，可有多个参数，用&#x27;&amp;&#x27;符号隔开，每个参数的名和值用&#x27;=&#x27;符号隔开。例如：	</span><br><span class="line">	name=zs</span><br><span class="line">fragment:信息片断</span><br><span class="line">	字符串，锚点.</span><br></pre></td></tr></table></figure>

<h4 id="10-5-2-location的成员"><a href="#10-5-2-location的成员" class="headerlink" title="10.5.2 location的成员"></a>10.5.2 location的成员</h4><ul>
<li><p>使用chrome的控制台查看</p>
</li>
<li><p>查MDN</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/">MDN</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>);  <span class="comment">//得到地址栏中#号及后面内容</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">host</span>);  <span class="comment">//主机和端口号</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hostname</span>); <span class="comment">//主机名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">port</span>); <span class="comment">//端口号</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">protocol</span>); <span class="comment">//协议</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>); <span class="comment">//搜索内容，泛指?号及后面内容</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>); <span class="comment">//地址</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;http://www.baidu.com&quot;</span>;  <span class="comment">//设置新地址(会加入浏览器历史记录)</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="title function_">assign</span>(<span class="string">&quot;http://www.baidu.com&quot;</span>);  <span class="comment">//设置新地址，等同于上面href属性(会加入浏览器历史记录)</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="title function_">reload</span>();  <span class="comment">//重新加载网页</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="title function_">replace</span>(<span class="string">&quot;http://www.baidu.com&quot;</span>);  <span class="comment">//替换当前网页(没有浏览器的历史记录)</span></span><br></pre></td></tr></table></figure>
<h4 id="10-5-3-案例"><a href="#10-5-3-案例" class="headerlink" title="10.5.3 案例"></a>10.5.3 案例</h4><p>解析URL中的query，并返回对象的形式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//http://baidu.com?name=&quot;&quot;&amp;age=1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getQuery</span>(<span class="params">queryStr</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> query = &#123;&#125;;</span><br><span class="line">  <span class="keyword">if</span> (queryStr.<span class="title function_">indexOf</span>(<span class="string">&#x27;?&#x27;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> index = queryStr.<span class="title function_">indexOf</span>(<span class="string">&#x27;?&#x27;</span>);</span><br><span class="line">    queryStr = queryStr.<span class="title function_">substr</span>(index + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> array = queryStr.<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; array.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> tmpArr = array[i].<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span> (tmpArr.<span class="property">length</span> === <span class="number">2</span>) &#123;</span><br><span class="line">        query[tmpArr[<span class="number">0</span>]] = tmpArr[<span class="number">1</span>];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> query;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getQuery</span>(location.<span class="property">href</span>));</span><br></pre></td></tr></table></figure>

<h3 id="10-6-history对象"><a href="#10-6-history对象" class="headerlink" title="10.6 history对象"></a>10.6 history对象</h3><ul>
<li><p>back()                    后退</p>
</li>
<li><p>forward()              前进</p>
</li>
<li><p>go()                        跳转下一页面</p>
<p><img src="/media%5Caaa.PNG"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">上图中，点击页面<span class="number">1</span>中的 跳(go方法) 按钮来到第二个页面，点击第二个页面的后退按钮(back方法)来到第一个页面，点击第一个页面的前进(forward方法)来到第二个页面</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="10-7-navigator对象"><a href="#10-7-navigator对象" class="headerlink" title="10.7 navigator对象"></a>10.7 navigator对象</h3><ul>
<li>userAgent</li>
</ul>
<p>通过userAgent可以判断用户浏览器的类型</p>
<ul>
<li>platform</li>
</ul>
<p>通过platform可以判断浏览器所在的系统平台类型.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">platform</span>);  <span class="comment">//查看操作系统平台信息</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">userAgent</span>);  <span class="comment">//查看浏览器类型，每个浏览器都不一样。可以通过该属性判断客户端环境，切换不同的页面。(电脑端一个页面，手机端一个页面)</span></span><br></pre></td></tr></table></figure>

<h3 id="10-8-定时器"><a href="#10-8-定时器" class="headerlink" title="10.8 定时器"></a>10.8 定时器</h3><h4 id="10-8-1-setTimeout-和clearTimeout"><a href="#10-8-1-setTimeout-和clearTimeout" class="headerlink" title="10.8.1 setTimeout()和clearTimeout()"></a>10.8.1 setTimeout()和clearTimeout()</h4><p>在指定的毫秒数到达之后执行指定的函数，只执行一次</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个定时器，1000毫秒后执行，返回定时器的标示</span></span><br><span class="line"><span class="keyword">var</span> timerId = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取消定时器的执行</span></span><br><span class="line"><span class="built_in">clearTimeout</span>(timerId);</span><br></pre></td></tr></table></figure>

<h4 id="10-8-2-案例"><a href="#10-8-2-案例" class="headerlink" title="10.8.2 案例"></a>10.8.2 案例</h4><p>1.删除提示</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">      <span class="attr">margin</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attr">padding</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    #tip &#123;</span><br><span class="line">      <span class="attr">width</span>: 150px;</span><br><span class="line">      <span class="attr">height</span>: 30px;</span><br><span class="line">      background-<span class="attr">color</span>: lightgray;</span><br><span class="line">      <span class="attr">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">      <span class="attr">margin</span>:200px auto;</span><br><span class="line">      padding-<span class="attr">top</span>: 5px;</span><br><span class="line">      text-<span class="attr">align</span>: center;</span><br><span class="line">      <span class="attr">color</span>: red;</span><br><span class="line">      <span class="attr">display</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tip&quot;</span>&gt;</span>删除成功<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 当页面的所有元素创建完成, 等待外部文件下载完毕才会执行</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      btn.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 删除操作</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 显示删除成功的tip</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> tip = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tip&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        tip.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 隔3秒钟之后让tip隐藏</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          tip.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;, <span class="number">3000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h4 id="10-8-3-setInterval-和clearInterval"><a href="#10-8-3-setInterval-和clearInterval" class="headerlink" title="10.8.3 setInterval()和clearInterval()"></a>10.8.3 setInterval()和clearInterval()</h4><p>定时调用的函数，可以按照给定的时间(单位毫秒)周期调用函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个定时器，每隔1秒调用一次</span></span><br><span class="line"><span class="keyword">var</span> timerId = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">toLocaleTimeString</span>());</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取消定时器的执行</span></span><br><span class="line"><span class="built_in">clearInterval</span>(timerId);</span><br></pre></td></tr></table></figure>

<h4 id="10-8-4-案例"><a href="#10-8-4-案例" class="headerlink" title="10.8.4 案例"></a>10.8.4 案例</h4><p>1.摇起来</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;摇起来&quot;</span> id=<span class="string">&quot;btn1&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;停止&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn2&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/heihei.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/lyml.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">img</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">div</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//点击按钮摇起来</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> timeId=<span class="string">&quot;&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn1&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    timeId= <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//随机数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> x = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">100</span> + <span class="number">1</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> y = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">100</span> + <span class="number">1</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//设置元素的left和top属性值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">style</span>.<span class="property">left</span> = x + <span class="string">&quot;px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">style</span>.<span class="property">top</span> = y + <span class="string">&quot;px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;, <span class="number">10</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn2&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="built_in">clearInterval</span>(timeId);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>案例2：星星</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;亮起来&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">	<span class="selector-tag">div</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">width</span>: <span class="number">600px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">height</span>: <span class="number">600px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">border</span>:<span class="number">2px</span> solid yellow;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">background-color</span>: black;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">	<span class="selector-tag">span</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">color</span>: yellow;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">innerHTML</span>=<span class="string">&quot;&lt;span&gt;★&lt;/span&gt;&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> x = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">600</span> + <span class="number">1</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> y = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">600</span> + <span class="number">1</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">firstElementChild</span>.<span class="property">style</span>.<span class="property">left</span>=x+<span class="string">&quot;px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">firstElementChild</span>.<span class="property">style</span>.<span class="property">top</span>=y+<span class="string">&quot;px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,<span class="number">50</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>案例3：美女时钟</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;&quot;</span> alt=<span class="string">&quot;&quot;</span> id=<span class="string">&quot;im&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//获取当前时间</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//获取小时</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> hour = dt.<span class="title function_">getHours</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//获取秒</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> second = dt.<span class="title function_">getSeconds</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    hour = hour &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + hour : hour;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    second = second &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + second : second;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;im&quot;</span>).<span class="property">src</span>=<span class="string">&quot;meimei/&quot;</span>+hour+<span class="string">&quot;_&quot;</span>+second+<span class="string">&quot;.jpg&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">f1</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//页面加载完毕后,过了1秒才执行函数的代码</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="built_in">setInterval</span>(f1,<span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>4.案例：协议按钮禁用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;textarea name=<span class="string">&quot;texta&quot;</span> id=<span class="string">&quot;&quot;</span> cols=<span class="string">&quot;30&quot;</span> rows=<span class="string">&quot;10&quot;</span>&gt;</span><br><span class="line">  这个世界就是这么疯狂,你不同意,我就让你注册,秦始皇,打钱</span><br><span class="line">&lt;/textarea&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;请仔细阅读协议(5)&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">disabled</span>=<span class="string">&quot;disabled&quot;</span> /&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="keyword">var</span> time=<span class="number">5</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="keyword">var</span> timeId= <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    time--;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">value</span>=<span class="string">&quot;请仔细阅读协议(&quot;</span>+time+<span class="string">&quot;)&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span>(time&lt;=<span class="number">0</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//停止定时器就可以</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="built_in">clearInterval</span>(timeId);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//按钮可以被点击了</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">disabled</span>=<span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">value</span>=<span class="string">&quot;同意&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,<span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>5.案例：设置div透明度渐变</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;dv&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;渐变&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> opacity = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//按钮的点击事件</span></span><br><span class="line">    <span class="keyword">var</span> timeId=<span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//透明化了</span></span><br><span class="line">      opacity--;</span><br><span class="line">      <span class="keyword">if</span>(opacity&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(timeId);<span class="comment">//清理定时器</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//设置div的透明度</span></span><br><span class="line">      <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span>=opacity/<span class="number">10</span>;</span><br><span class="line">    &#125;,<span class="number">200</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>6.案例：设置div的宽度</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;变宽&quot;</span> id=<span class="string">&quot;btn&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dv = <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>);</span><br><span class="line"><span class="title function_">my$</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//宽度的目标值</span></span><br><span class="line">    <span class="keyword">var</span> target = <span class="number">791</span>;</span><br><span class="line">    <span class="comment">//获取原来宽度</span></span><br><span class="line">    <span class="keyword">var</span> width = dv.<span class="property">offsetWidth</span>;</span><br><span class="line">    <span class="comment">//开启定时器</span></span><br><span class="line">    <span class="keyword">var</span> timeid = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">//确定步进</span></span><br><span class="line">        <span class="keyword">var</span> step = <span class="number">10</span>;</span><br><span class="line">        <span class="comment">//判断目标值和当前值大小</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(target-width) &lt; step)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;qingchu&quot;</span>);</span><br><span class="line">            dv.<span class="property">style</span>.<span class="property">width</span> = target + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">            <span class="built_in">clearInterval</span>(timeid);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        width += step;</span><br><span class="line">        <span class="comment">//把current设置给dv</span></span><br><span class="line">        dv.<span class="property">style</span>.<span class="property">width</span> = width + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">    &#125;,<span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7.案例：移动元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;移动到400px&quot;</span> id=<span class="string">&quot;btn1&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;移动到800px&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn2&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> dv = <span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> left = dv.<span class="property">offsetLeft</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;btn1&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> target = <span class="number">400</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> timeid = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> step = <span class="number">10</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(target - left) &lt; step)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                dv.<span class="property">style</span>.<span class="property">left</span> = target + <span class="string">&quot;px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;终止&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="built_in">clearInterval</span>(timeid);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">return</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            left += step;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            dv.<span class="property">style</span>.<span class="property">left</span> = left + <span class="string">&quot;px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,<span class="number">50</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;btn2&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> target = <span class="number">800</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> timeid = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> step = <span class="number">10</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(target - left) &lt; step)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                dv.<span class="property">style</span>.<span class="property">left</span> = target + <span class="string">&quot;px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;终止&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="built_in">clearInterval</span>(timeid);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">return</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            left += step;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            dv.<span class="property">style</span>.<span class="property">left</span> = left + <span class="string">&quot;px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,<span class="number">50</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="10-8-5-动画函数的初步封装"><a href="#10-8-5-动画函数的初步封装" class="headerlink" title="10.8.5 动画函数的初步封装"></a>10.8.5 动画函数的初步封装</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//移动动画函数的封装</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params">element, target</span>) &#123;</span><br><span class="line">   <span class="comment">// 通过判断，保证页面上只有一个定时器在执行动画</span></span><br><span class="line">  <span class="keyword">if</span> (element.<span class="property">timerId</span>) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(element.<span class="property">timerId</span>);</span><br><span class="line">    element.<span class="property">timerId</span> = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  element.<span class="property">timerId</span> = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 步进  每次移动的距离</span></span><br><span class="line">    <span class="keyword">var</span> step = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">// 盒子当前的位置</span></span><br><span class="line">    <span class="keyword">var</span> current = element.<span class="property">offsetLeft</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断如果当前位置 &gt; 目标位置 此时的step  要小于0</span></span><br><span class="line">    <span class="keyword">if</span> (current &gt; target) &#123;</span><br><span class="line">      step = - <span class="title class_">Math</span>.<span class="title function_">abs</span>(step);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(current - target)  &lt;= <span class="title class_">Math</span>.<span class="title function_">abs</span>(step)) &#123;</span><br><span class="line">      <span class="comment">// 让定时器停止</span></span><br><span class="line">      <span class="built_in">clearInterval</span>(element.<span class="property">timerId</span>);</span><br><span class="line">      <span class="comment">// 让盒子到target的位置</span></span><br><span class="line">      element.<span class="property">style</span>.<span class="property">left</span> = target + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 移动盒子</span></span><br><span class="line">    current += step;</span><br><span class="line">    element.<span class="property">style</span>.<span class="property">left</span> = current + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">  &#125;, <span class="number">200</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-8-6-图片轮播"><a href="#10-8-6-图片轮播" class="headerlink" title="10.8.6 图片轮播"></a>10.8.6 图片轮播</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;all&quot;</span> id=<span class="string">&#x27;box&#x27;</span>&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;screen&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1m.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/2m.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/3m.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/4m.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/5m.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;arr&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="symbol">&amp;lt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        * &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">list-style</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">border</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.all</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">500px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">padding</span>: <span class="number">7px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.screen</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">500px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">overflow</span>: hidden;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.screen</span> <span class="selector-tag">li</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">500px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">overflow</span>: hidden;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">float</span>: left;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.screen</span> <span class="selector-tag">ul</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">top</span>: <span class="number">0px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">3000px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.all</span> <span class="selector-tag">ol</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">right</span>: <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">bottom</span>: <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">line-height</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.all</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">float</span>: left;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">cursor</span>: pointer;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-class">.all</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-class">.current</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">background</span>: yellow;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-id">#arr</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">display</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">z-index</span>: <span class="number">1000</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-id">#arr</span> <span class="selector-tag">span</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">width</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">height</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">left</span>: <span class="number">5px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">top</span>: <span class="number">50%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">margin-top</span>: -<span class="number">20px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">background</span>: <span class="number">#000</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">cursor</span>: pointer;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">line-height</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">font-weight</span>: bold;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">font-family</span>: <span class="string">&#x27;黑体&#x27;</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">opacity</span>: <span class="number">0.3</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-id">#arr</span> <span class="selector-id">#right</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">right</span>: <span class="number">5px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">left</span>: auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">// 1.获取元素</span></span><br><span class="line">  <span class="keyword">var</span> box = <span class="title function_">my$</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> screen = box.<span class="property">children</span>[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">var</span> ul = screen.<span class="property">children</span>[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">var</span> ol = screen.<span class="property">children</span>[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 箭头 arrow</span></span><br><span class="line">  <span class="keyword">var</span> arr = <span class="title function_">my$</span>(<span class="string">&#x27;arr&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> arrLeft = <span class="title function_">my$</span>(<span class="string">&#x27;left&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> arrRight = <span class="title function_">my$</span>(<span class="string">&#x27;right&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 图片的宽度</span></span><br><span class="line">  <span class="keyword">var</span> imgWidth = screen.<span class="property">offsetWidth</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 2.动态生成ol下的li.页面上总共有多少张图片就生成多少个li </span></span><br><span class="line">  <span class="keyword">var</span> count = ul.<span class="property">children</span>.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">    ol.<span class="title function_">appendChild</span>(li);</span><br><span class="line">    <span class="title function_">setInnerText</span>(li, i + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//给每一个ol下的li绑定事件</span></span><br><span class="line">    li.<span class="property">onclick</span> = liClick;</span><br><span class="line">    <span class="comment">// 让当前li记录他的索引</span></span><br><span class="line">    <span class="comment">// 设置标签的自定义属性</span></span><br><span class="line">    li.<span class="title function_">setAttribute</span>(<span class="string">&#x27;index&#x27;</span>, i);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//3.ol下的li的点击事件</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">liClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 3.1 取消其它li的高亮显示，让当前li高亮显示</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; ol.<span class="property">children</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> li = ol.<span class="property">children</span>[i];</span><br><span class="line">      li.<span class="property">className</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3.2 让当前li高亮显示</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&#x27;current&#x27;</span>;</span><br><span class="line">      </span><br><span class="line">    <span class="comment">// 3.3 点击序号，动画的方式切换到当前点击的图片位置</span></span><br><span class="line">    <span class="comment">// 获取自定义属性</span></span><br><span class="line">    <span class="keyword">var</span> liIndex = <span class="built_in">parseInt</span>(<span class="variable language_">this</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;index&#x27;</span>));</span><br><span class="line">    <span class="title function_">animate</span>(ul, -liIndex * imgWidth);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 全局变量index  和 li中的index保持一致</span></span><br><span class="line">    index = liIndex;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 让ol下序号1的li默认高亮显示</span></span><br><span class="line">  ol.<span class="property">children</span>[<span class="number">0</span>].<span class="property">className</span> = <span class="string">&#x27;current&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//4.无缝滚动,获取ul中的第一个li并克隆一份追加到ul最后</span></span><br><span class="line">  <span class="keyword">var</span> firstLi = ul.<span class="property">children</span>[<span class="number">0</span>];</span><br><span class="line">  <span class="comment">// 克隆li  cloneNode()  复制节点  </span></span><br><span class="line">  <span class="comment">// 参数  true  复制节点中的内容</span></span><br><span class="line">  <span class="comment">//       false  只复制当前节点，不复制里面的内容</span></span><br><span class="line">  <span class="keyword">var</span> cloneLi = firstLi.<span class="title function_">cloneNode</span>(<span class="literal">true</span>);</span><br><span class="line">  ul.<span class="title function_">appendChild</span>(cloneLi);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//5.实现上一张和下一张的功能</span></span><br><span class="line">  <span class="comment">//5.1 下一张</span></span><br><span class="line">  <span class="keyword">var</span> index = <span class="number">0</span>; <span class="comment">// 第一张图片的索引</span></span><br><span class="line">  arrRight.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 判断是否是克隆的图片，如果是克隆的图片，此时修改ul的坐标，显示真正的第一张图片</span></span><br><span class="line">    <span class="keyword">if</span> (index === count) &#123;</span><br><span class="line">      ul.<span class="property">style</span>.<span class="property">left</span> = <span class="string">&#x27;0px&#x27;</span>;</span><br><span class="line">      index = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 总共有5张图片，但是还有一张克隆的图片  克隆的图片的索引是5 </span></span><br><span class="line">    <span class="comment">// 总count为5个</span></span><br><span class="line">    <span class="comment">// index对应li的下标 取值范围为 0~4</span></span><br><span class="line">    <span class="comment">// index++取值范围为 1~5</span></span><br><span class="line">    index++;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">if</span> (index &lt; count) &#123;</span><br><span class="line">        <span class="comment">// animate(ul, -index * imgWidth);</span></span><br><span class="line">        <span class="comment">// 获取图片对应的序号，让序号点击</span></span><br><span class="line">        ol.<span class="property">children</span>[index].<span class="title function_">click</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//如果是最后一张图片,以动画的方式，移动到克隆的图片(克隆的图片在所有图片的最后)</span></span><br><span class="line">      <span class="title function_">animate</span>(ul, -index * imgWidth);</span><br><span class="line">      <span class="comment">// 取消所有序号的高亮显示，让第一序号高亮显示</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; ol.<span class="property">children</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> li = ol.<span class="property">children</span>[i];</span><br><span class="line">        li.<span class="property">className</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">	  <span class="comment">//移动到克隆图片之后，让第0个ol下的li选中</span></span><br><span class="line">      ol.<span class="property">children</span>[<span class="number">0</span>].<span class="property">className</span> = <span class="string">&#x27;current&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 5.2 上一张</span></span><br><span class="line">  arrLeft.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 如果当前是第一张图片，此时要偷偷的切换到最后一张图片的位置（克隆的第一张图片）</span></span><br><span class="line">    <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">      index = count;</span><br><span class="line">      ul.<span class="property">style</span>.<span class="property">left</span> = - index * imgWidth + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    index--;</span><br><span class="line">    ol.<span class="property">children</span>[index].<span class="title function_">click</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="comment">//6.鼠标放到盒子上显示箭头，关闭定时器</span></span><br><span class="line">  box.<span class="property">onmouseenter</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    arr.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">    <span class="comment">// 清除定时器</span></span><br><span class="line">    <span class="built_in">clearInterval</span>(timerId);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//7.鼠标移开盒子隐藏箭头并开启定时器</span></span><br><span class="line">  box.<span class="property">onmouseleave</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    arr.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    <span class="comment">// 重新开启定时器</span></span><br><span class="line">    timerId = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      arrRight.<span class="title function_">click</span>();</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="comment">//8.自动切换图片(定时器)</span></span><br><span class="line">  <span class="keyword">var</span> timerId = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 切换到下一张图片</span></span><br><span class="line">    arrRight.<span class="title function_">click</span>();</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>



<h4 id="10-8-7-动画函数的封装"><a href="#10-8-7-动画函数的封装" class="headerlink" title="10.8.7 动画函数的封装"></a>10.8.7 动画函数的封装</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">     #dv&#123;</span><br><span class="line">            <span class="attr">width</span>: 75px;</span><br><span class="line">            <span class="attr">height</span>: 25px;</span><br><span class="line">            background-<span class="attr">color</span>: red;</span><br><span class="line">            <span class="attr">position</span>: absolute;</span><br><span class="line">            <span class="attr">left</span>: 100px;</span><br><span class="line">     &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点我&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//获取任意一个元素的任意一个属性的当前的值---当前属性的位置值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">getStyle</span>(<span class="params">element, attr</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">getComputedStyle</span> ? <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(element, <span class="literal">null</span>)[attr] : element.<span class="property">currentStyle</span>[attr] || <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params">element, json, fn</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="built_in">clearInterval</span>(element.<span class="property">timeId</span>);<span class="comment">//清理定时器</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//定时器,返回的是定时器的id</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        element.<span class="property">timeId</span> = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> flag = <span class="literal">true</span>;<span class="comment">//默认,假设,全部到达目标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//遍历json对象中的每个属性还有属性对应的目标值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">for</span> (<span class="keyword">var</span> attr <span class="keyword">in</span> json) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//判断这个属性attr中是不是opacity</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">if</span> (attr == <span class="string">&quot;opacity&quot;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="comment">//获取元素的当前的透明度,当前的透明度放大100倍</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">var</span> current = <span class="title function_">getStyle</span>(element, attr) * <span class="number">100</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="comment">//目标的透明度放大100倍</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">var</span> target = json[attr] * <span class="number">100</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">var</span> step = (target - current) / <span class="number">10</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    step = step &gt; <span class="number">0</span> ? <span class="title class_">Math</span>.<span class="title function_">ceil</span>(step) : <span class="title class_">Math</span>.<span class="title function_">floor</span>(step);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(current - target)  &lt;= <span class="title class_">Math</span>.<span class="title function_">abs</span>(step))&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="comment">// 让定时器停止</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="built_in">clearInterval</span>(element.<span class="property">timerId</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="comment">// 让盒子到target的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        element.<span class="property">style</span>[attr] = target / <span class="number">100</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">else</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        current += step;<span class="comment">//移动后的值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        element.<span class="property">style</span>[attr] = current / <span class="number">100</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (attr == <span class="string">&quot;zIndex&quot;</span>) &#123; <span class="comment">//判断这个属性attr中是不是zIndex</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="comment">//层级改变就是直接改变这个属性的值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    element.<span class="property">style</span>[attr] = json[attr];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="comment">//普通的属性</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="comment">//获取元素这个属性的当前的值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">var</span> current = <span class="built_in">parseInt</span>(<span class="title function_">getStyle</span>(element, attr));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="comment">//当前的属性对应的目标值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">var</span> target = json[attr];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="comment">//移动的步数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">var</span> step = (target - current) / <span class="number">10</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    step = step &gt; <span class="number">0</span> ? <span class="title class_">Math</span>.<span class="title function_">ceil</span>(step) : <span class="title class_">Math</span>.<span class="title function_">floor</span>(step);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(current - target)  &lt;= <span class="title class_">Math</span>.<span class="title function_">abs</span>(step))&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="comment">// 让定时器停止</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="built_in">clearInterval</span>(element.<span class="property">timerId</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="comment">// 让盒子到target的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        element.<span class="property">style</span>[attr] = target + <span class="string">&#x27;px&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">else</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        current += step;<span class="comment">//移动后的值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        element.<span class="property">style</span>[attr] = current + <span class="string">&quot;px&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//测试代码</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;目标:&quot;</span> + target + <span class="string">&quot;,当前:&quot;</span> + current + <span class="string">&quot;,每次的移动步数:&quot;</span> + step);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//是否到达目标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">if</span> (current != target) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    flag = <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span> (flag) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//清理定时器</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="built_in">clearInterval</span>(element.<span class="property">timeId</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//所有的属性到达目标才能使用这个函数,前提是用户传入了这个函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">if</span> (fn) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="title function_">fn</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;, <span class="number">20</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//zIndex:1000</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//透明度: 数字类型----小数---放大100倍</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">my$</span>(<span class="string">&quot;btn1&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> json1 = &#123;<span class="string">&quot;width&quot;</span>: <span class="number">400</span>, <span class="string">&quot;height&quot;</span>: <span class="number">500</span>, <span class="string">&quot;left&quot;</span>: <span class="number">500</span>, <span class="string">&quot;top&quot;</span>: <span class="number">80</span>, <span class="string">&quot;opacity&quot;</span>: <span class="number">0.2</span>&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">animate</span>(<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>), json1, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">animate</span>(<span class="title function_">my$</span>(<span class="string">&quot;dv&quot;</span>), &#123;<span class="string">&quot;width&quot;</span>: <span class="number">40</span>, <span class="string">&quot;height&quot;</span>: <span class="number">50</span>, <span class="string">&quot;left&quot;</span>: <span class="number">0</span>, <span class="string">&quot;top&quot;</span>: <span class="number">0</span>, <span class="string">&quot;opacity&quot;</span>: <span class="number">1</span>, <span class="string">&quot;zIndex&quot;</span>: <span class="number">1000</span>&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="10-8-8-案例"><a href="#10-8-8-案例" class="headerlink" title="10.8.8 案例"></a>10.8.8 案例</h4><p>1.小米官网：手风琴案例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">ul</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">list-style</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    * &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">padding</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">div</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">1150px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">400px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">overflow</span>: hidden;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">div</span> <span class="selector-tag">li</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">240px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">400px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">float</span>: left;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">div</span> <span class="selector-tag">ul</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">1300px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//使用之前封装的动画</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//先获取所有的li标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> list = <span class="title function_">my$</span>(<span class="string">&quot;box&quot;</span>).<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;li&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    list[i].<span class="property">style</span>.<span class="property">backgroundImage</span> = <span class="string">&quot;url(images/&quot;</span> + (i + <span class="number">1</span>) + <span class="string">&quot;.jpg)&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//鼠标进入</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    list[i].<span class="property">onmouseover</span> = mouseoverHandle;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//鼠标离开</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    list[i].<span class="property">onmouseout</span> = mouseoutHandle;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//进入</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">mouseoverHandle</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; list.<span class="property">length</span>; j++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">animate</span>(list[j], &#123;<span class="string">&quot;width&quot;</span>: <span class="number">100</span>&#125;);<span class="comment">//动画效果</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">animate</span>(<span class="variable language_">this</span>, &#123;<span class="string">&quot;width&quot;</span>: <span class="number">800</span>&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//离开</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">mouseoutHandle</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; list.<span class="property">length</span>; j++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">animate</span>(list[j], &#123;<span class="string">&quot;width&quot;</span>: <span class="number">240</span>&#125;);<span class="comment">//动画效果</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>2.开机动画</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;box&quot;</span> id=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;closeButton&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hd&quot;</span> <span class="attr">id</span>=<span class="string">&quot;headPart&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/t.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bd&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bottomPart&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/b.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.box</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">322px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">position</span>: fixed;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">right</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">overflow</span>: hidden;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-tag">span</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">right</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">width</span>: <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">height</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">cursor</span>: pointer;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">my$</span>(<span class="string">&quot;closeButton&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//设置最下面的div的高渐渐的变成0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">animate</span>(<span class="title function_">my$</span>(<span class="string">&quot;bottomPart&quot;</span>),&#123;<span class="string">&quot;height&quot;</span>:<span class="number">0</span>&#125;,<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">animate</span>(<span class="title function_">my$</span>(<span class="string">&quot;box&quot;</span>),&#123;<span class="string">&quot;width&quot;</span>:<span class="number">0</span>&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>3、回到顶部。页面和css参照代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 获取元素</span></span><br><span class="line">    <span class="keyword">var</span> bodyTop = <span class="title function_">my$</span>(<span class="string">&#x27;top&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// top 是window自带的一个属性，此属性是只读的。此属性默认是window对象</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 回到顶部的按钮</span></span><br><span class="line">    <span class="keyword">var</span> totop = <span class="title function_">my$</span>(<span class="string">&#x27;totop&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当拖动滚动条的时候执行</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">onscroll</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//1 当拖动滚动条的时候，当内容滚动出去 10px的时候，改变top的高度，并且显示回到顶部按钮</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用common.js getScroll函数，获取页面滚动出去的距离</span></span><br><span class="line">        <span class="keyword">var</span> scrollTop = <span class="title function_">getScroll</span>().<span class="property">scrollTop</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(scrollTop);</span><br><span class="line">        <span class="keyword">if</span> (scrollTop &gt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="comment">// 改变top</span></span><br><span class="line">            bodyTop.<span class="property">className</span> = <span class="string">&#x27;header fixed&#x27;</span>;</span><br><span class="line">            <span class="comment">// 显示回到顶部</span></span><br><span class="line">            totop.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 改变top</span></span><br><span class="line">            bodyTop.<span class="property">className</span> = <span class="string">&#x27;header&#x27;</span>;</span><br><span class="line">            <span class="comment">// 显示回到顶部</span></span><br><span class="line">            totop.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如何获取滚动距离</span></span><br><span class="line">        <span class="comment">// document.body.scrollTop</span></span><br><span class="line">        <span class="comment">// documentElement  网页中的根元素 html</span></span><br><span class="line">        <span class="comment">// document.documentElement.scrollTop</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2 当点击回到顶部按钮的时候，动画的方式，回到最上面，让滚动距离为0</span></span><br><span class="line">    <span class="keyword">var</span> timerId = <span class="literal">null</span>;</span><br><span class="line">    totop.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (timerId) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(timerId);</span><br><span class="line">            timerId = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        timerId = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 步进 每次移动的距离</span></span><br><span class="line">            <span class="keyword">var</span> step = <span class="number">10</span>;</span><br><span class="line">            <span class="comment">// 目标位置</span></span><br><span class="line">            <span class="keyword">var</span> target = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取当前位置</span></span><br><span class="line">            <span class="keyword">var</span> current = <span class="title function_">getScroll</span>().<span class="property">scrollTop</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (current &gt; target) &#123;</span><br><span class="line">                step = -<span class="title class_">Math</span>.<span class="title function_">abs</span>(step);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 判断当前是否到达目标位置</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(current - target) &lt;= <span class="title class_">Math</span>.<span class="title function_">abs</span>(step)) &#123;</span><br><span class="line">                <span class="built_in">clearInterval</span>(timerId);</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> = target;</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> = target;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            current += step;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> = current;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> = current;</span><br><span class="line">        &#125;, <span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="10-8-9-setInterval-定时器的问题"><a href="#10-8-9-setInterval-定时器的问题" class="headerlink" title="10.8.9 setInterval()定时器的问题"></a>10.8.9 setInterval()定时器的问题</h4><h5 id="a-进程"><a href="#a-进程" class="headerlink" title="a) 进程"></a>a) 进程</h5><pre><code>进程：正在内存中运行的应用程序，每个进程都有自己独立的内存空间。

思考：单核CPU下计算机如何同时运行多个应用程序。

单核CPU下，同一时间片只能运行一个应用程序，我们所看到的同时运行多个应用程序只不过是CPU在各个应用程序之间进行了快速切换。
</code></pre>
<h5 id="b-线程"><a href="#b-线程" class="headerlink" title="b) 线程"></a>b) 线程</h5><pre><code>线程：负责了进程中对应代码的执行（执行单元）

多线程：在一个进程中同时运行的多个任务，所有线程共享进程的所有资源。（比如360安全卫士：同时扫描木马\清理垃圾）

进程进行CPU的资源争夺其实质是进程中的线程在进行CPU的资源争夺，CPU在各个应用程序的线程之间快速切换。
</code></pre>
<h5 id="c-js是单线程的"><a href="#c-js是单线程的" class="headerlink" title="c) js是单线程的"></a>c) js是单线程的</h5><pre><code>    单线程意味着下一段代码必须在当前代码执行完了才能执行。

单线程即任务是串行的，后一个任务需要等待前一个任务的执行，这就可能出现长时间的等待

所以如果setInterval内执行的计算过于耗时,或者有其他耗时任务在执行,setInterval的计时会越来越不准,延迟很厉害。
</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">var</span>  i = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">while</span>(i++ &lt; <span class="number">1000000000</span>);</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>());</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//延时越来越严重，建议在js中不要有太耗时的任务(比如大量的计算不适合放在js代码中运行)</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068797161</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068799464</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068801683</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068803645</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068805520</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068807268</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068808869</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068810208</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068811428</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068815592</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068918620</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068920867</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068922759</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068924462</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068925939</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068927246</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068928539</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068931052</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068934252</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068936985</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068938665</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068940147</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068942976</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068946435</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068949728</span></span><br><span class="line"><span class="title class_">VM222</span>:<span class="number">4</span> <span class="number">1537068952935</span></span><br></pre></td></tr></table></figure>

<h2 id="11-JS事件循环"><a href="#11-JS事件循环" class="headerlink" title="11. JS事件循环"></a>11. JS事件循环</h2><h3 id="11-1-事件循环机制"><a href="#11-1-事件循环机制" class="headerlink" title="11.1 事件循环机制"></a>11.1 事件循环机制</h3><pre><code>众所周知，JS是单线程，单线程即任务是串行的，后一个任务需要等待前一个任务的执行，这就可能出现长时间的等待。但由于类似ajax网络请求、setTimeout时间延迟、DOM事件的用户交互等，这些任务并不消耗 CPU，是一种空等，资源浪费，因此出现了异步。

通过将任务交给相应的异步模块去处理，主线程的效率大大提升，可以并行的去处理其他的操作。当异步处理完成，主线程空闲时，主线程读取相应的callback，进行后续的操作，最大程度的利用CPU。

此时出现了同步执行和异步执行的概念，同步执行是主线程按照顺序，串行执行任务；异步执行就是cpu跳过等待，先处理后续的任务（CPU与网络模块、timer等并行进行任务）。由此产生了任务队列与事件循环，来协调主线程与异步模块之间的工作。
</code></pre>
<p><img src="/media%5Ceventloop.png"></p>
<h3 id="11-2-任务队列"><a href="#11-2-任务队列" class="headerlink" title="11.2 任务队列"></a>11.2 任务队列</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.一个线程中，事件循环是唯一的，但是任务队列可以拥有多个。</span></span><br><span class="line"><span class="comment">//2.任务队列又分为macro-task（宏任务）与micro-task（微任务），在最新标准中，它们被分别称为task与jobs。</span></span><br><span class="line"><span class="comment">//3.macro-task大概包括：script(整体代码), setTimeout, setInterval, setImmediate, I/O, UI rendering。</span></span><br><span class="line"><span class="comment">//4.micro-task大概包括: process.nextTick, Promise, Object.observe(已废弃), MutationObserver(html5新特性)。process.nextTick会先于Promise.then执行。</span></span><br><span class="line"><span class="comment">//5.来自不同任务源的任务会进入到不同的任务队列。其中setTimeout与setInterval是同源的。</span></span><br><span class="line"><span class="comment">//6.事件循环的顺序，决定了JavaScript代码的执行顺序。它从script(整体代码)开始第一次循环。之后全局上下文进入函数调用栈。直到调用栈清空(只剩全局)，然后执行所有的micro-task。当所有可执行的micro-task执行完毕之后。循环再次从macro-task开始，找到其中一个任务队列执行完毕，然后再执行所有的micro-task，这样一直循环下去。</span></span><br><span class="line"><span class="comment">//7.其中每一个任务的执行，无论是macro-task还是micro-task，都是借助函数调用栈来完成。</span></span><br></pre></td></tr></table></figure>

<h3 id="11-3-案例1"><a href="#11-3-案例1" class="headerlink" title="11.3 案例1"></a>11.3 案例1</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// demo01  出自于上面我引用文章的一个例子，我们来根据上面的结论，一步一步分析具体的执行过程。</span></span><br><span class="line"><span class="comment">// 为了方便理解，我以打印出来的字符作为当前的任务名称</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;timeout1&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise1&#x27;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">        i == <span class="number">99</span> &amp;&amp; <span class="title function_">resolve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise2&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;then1&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;global1&#x27;</span>);</span><br></pre></td></tr></table></figure>

<pre><code>首先，事件循环从宏任务队列开始，这个时候，宏任务队列中，只有一个script(整体代码)任务。每一个任务的执行顺序，都依靠函数调用栈来搞定，而当遇到任务源时，则会先分发任务到对应的队列中去，所以，上面例子的首先执行如下图所示。
</code></pre>
<p><img src="/media%5Cxunhuan01.png"></p>
<pre><code>第一步：script任务开始执行，全局上下文入栈

第二步：script任务执行时首先遇到了setTimeout，setTimeout为一个宏任务源，那么他的作用就是将任务分发到它对应的队列中。
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function() &#123;</span><br><span class="line">    console.log(&#x27;timeout1&#x27;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="/media%5Cxunhuan02.png"></p>
<pre><code>第三步：script执行时遇到Promise实例。Promise构造函数中的第一个参数，是在new的时候执行，因此不会进入任何其他的队列，而是直接在当前任务直接执行了，而后续的.then则会被分发到micro-task的Promise队列中去。

因此，构造函数执行时，里面的参数进入函数调用栈执行。for循环不会进入任何队列，因此代码会依次执行，所以这里的promise1和promise2会依次输出。
</code></pre>
<p><img src="/media%5Cxunhuan03.png"></p>
<p><img src="/media%5Cxunhuan04.png"></p>
<p><img src="/media%5Cxunhuan05.png"></p>
<pre><code>构造函数执行完毕的过程中，resolve执行完毕出栈，promise2输出，promise1页出栈，then执行时，Promise任务then1进入对应队列

script任务继续往下执行，最后只有一句输出了globa1，然后，全局任务就执行完毕了。

第四步：第一个宏任务script执行完毕之后，就开始执行所有的可执行的微任务。这个时候，微任务中，只有Promise队列中的一个任务then1，因此直接执行就行了，执行结果输出then1，当然，他的执行，也是进入函数调用栈中执行的。
</code></pre>
<p><img src="/media%5Cxunhuan06.png"></p>
<pre><code>第五步：当所有的micro-tast执行完毕之后，表示第一轮的循环就结束了。这个时候就得开始第二轮的循环。第二轮循环仍然从宏任务macro-task开始。
</code></pre>
<p><img src="/media%5Cxunhuan07.png"></p>
<pre><code>这个时候，我们发现宏任务中，只有在setTimeout队列中还要一个timeout1的任务等待执行。因此就直接执行即可。
</code></pre>
<p><img src="/media%5Cxunhuan08.png"></p>
<pre><code>这个时候宏任务队列与微任务队列中都没有任务了，所以代码就不会再输出其他东西了。
</code></pre>
<h3 id="11-4-案例2"><a href="#11-4-案例2" class="headerlink" title="11.4 案例2"></a>11.4 案例2</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;golb1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;timeout1&#x27;</span>);</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;timeout1_promise&#x27;</span>);</span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;timeout1_then&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;glob1_promise&#x27;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>();</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;glob1_then&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;timeout2&#x27;</span>);</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;timeout2_promise&#x27;</span>);</span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;timeout2_then&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;glob2_promise&#x27;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>();</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;glob2_then&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="12-其他"><a href="#12-其他" class="headerlink" title="12 其他"></a>12 其他</h2><p>common.js封装</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getDates</span>(<span class="params">dt</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">&quot;&quot;</span>;<span class="comment">//存储时间的字符串</span></span><br><span class="line">    <span class="comment">//获取年</span></span><br><span class="line">    <span class="keyword">var</span> year = dt.<span class="title function_">getFullYear</span>();</span><br><span class="line">    <span class="comment">//获取月</span></span><br><span class="line">    <span class="keyword">var</span> month = dt.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//获取日</span></span><br><span class="line">    <span class="keyword">var</span> day = dt.<span class="title function_">getDate</span>();</span><br><span class="line">    <span class="comment">//获取小时</span></span><br><span class="line">    <span class="keyword">var</span> hour = dt.<span class="title function_">getHours</span>();</span><br><span class="line">    <span class="comment">//获取分钟</span></span><br><span class="line">    <span class="keyword">var</span> min = dt.<span class="title function_">getMinutes</span>();</span><br><span class="line">    <span class="comment">//获取秒</span></span><br><span class="line">    <span class="keyword">var</span> sec = dt.<span class="title function_">getSeconds</span>();</span><br><span class="line">    month = month &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + month : month;</span><br><span class="line">    day = day &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + day : day;</span><br><span class="line">    hour = hour &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + hour : hour;</span><br><span class="line">    min = min &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + min : min;</span><br><span class="line">    sec = sec &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + sec : sec;</span><br><span class="line">    str = year + <span class="string">&quot;年&quot;</span> + month + <span class="string">&quot;月&quot;</span> + day + <span class="string">&quot;日 &quot;</span> + hour + <span class="string">&quot;:&quot;</span> + min + <span class="string">&quot;:&quot;</span> + sec;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取指定标签对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id 标签的id属性值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Element</span>&#125;根据id属性值返回指定标签对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">my$</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(id);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 设置元素的文本内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 任意元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> text 任意文本内容</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setInnerText</span>(<span class="params">element, text</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">typeof</span>(element.<span class="property">textContent</span>) == <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">        element.<span class="property">innerText</span> = text;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        element.<span class="property">textContent</span> = text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取元素的文本内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 任意元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">*</span>&#125; 任意元素中的文本内容</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getInnerText</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">typeof</span>(element.<span class="property">textContent</span>) == <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> element.<span class="property">innerText</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> element.<span class="property">textContent</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取父级元素中的第一个子元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 父级元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">*</span>&#125; 父级元素中的子级元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getFirstElement</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (element.<span class="property">firstElementChild</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> element.<span class="property">firstElementChild</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> node = element.<span class="property">firstChild</span>;</span><br><span class="line">        <span class="keyword">while</span> (node &amp;&amp; node.<span class="property">nodeType</span> != <span class="number">1</span>) &#123;</span><br><span class="line">            node = node.<span class="property">nextSibling</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取父级元素中的最后一个子元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 父级元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">*</span>&#125; 最后一个子元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getLastElement</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (element.<span class="property">lastElementChild</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> element.<span class="property">lastElementChild</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> node = element.<span class="property">lastChild</span>;</span><br><span class="line">        <span class="keyword">while</span> (node &amp;&amp; node.<span class="property">nodeType</span> != <span class="number">1</span>) &#123;</span><br><span class="line">            node = node.<span class="property">previousSibling</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取某个元素的前一个兄弟元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 某个元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">*</span>&#125; 前一个兄弟元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getPreviousElement</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (element.<span class="property">previousElementSibling</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> element.<span class="property">previousElementSibling</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> node = element.<span class="property">previousSibling</span>;</span><br><span class="line">        <span class="keyword">while</span> (node &amp;&amp; node.<span class="property">nodeType</span> != <span class="number">1</span>) &#123;</span><br><span class="line">            node = node.<span class="property">previousSibling</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取某个元素的后一个兄弟元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 某个元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">*</span>&#125; 后一个兄弟元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getNextElement</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (element.<span class="property">nextElementSibling</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> element.<span class="property">nextElementSibling</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> node = element.<span class="property">nextSibling</span>;</span><br><span class="line">        <span class="keyword">while</span> (node &amp;&amp; node.<span class="property">nodeType</span> != <span class="number">1</span>) &#123;</span><br><span class="line">            node = node.<span class="property">nextSibling</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取某个元素的所有兄弟元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 某个元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Array</span>&#125; 兄弟元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getSiblings</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!element)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">var</span> elements = [];</span><br><span class="line">    <span class="keyword">var</span> ele = element.<span class="property">previousSibling</span>;</span><br><span class="line">    <span class="keyword">while</span> (ele) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ele.<span class="property">nodeType</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            elements.<span class="title function_">push</span>(ele);</span><br><span class="line">        &#125;</span><br><span class="line">        ele = ele.<span class="property">previousSibling</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ele = element.<span class="property">nextSibling</span>;</span><br><span class="line">    <span class="keyword">while</span> (ele) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ele.<span class="property">nodeType</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            elements.<span class="title function_">push</span>(ele);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        ele = ele.<span class="property">nextSibling</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> elements;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回当前浏览器是什么类型的浏览器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">userBrowser</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> browserName=navigator.<span class="property">userAgent</span>.<span class="title function_">toLowerCase</span>();</span><br><span class="line">    <span class="keyword">if</span>(<span class="regexp">/msie/i</span>.<span class="title function_">test</span>(browserName) &amp;&amp; !<span class="regexp">/opera/</span>.<span class="title function_">test</span>(browserName))&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;IE&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/firefox/i</span>.<span class="title function_">test</span>(browserName))&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Firefox&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/chrome/i</span>.<span class="title function_">test</span>(browserName) &amp;&amp; <span class="regexp">/webkit/i</span>.<span class="title function_">test</span>(browserName) &amp;&amp; <span class="regexp">/mozilla/i</span>.<span class="title function_">test</span>(browserName))&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Chrome&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/opera/i</span>.<span class="title function_">test</span>(browserName))&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Opera&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/webkit/i</span>.<span class="title function_">test</span>(browserName) &amp;&amp;!(<span class="regexp">/chrome/i</span>.<span class="title function_">test</span>(browserName) &amp;&amp; <span class="regexp">/webkit/i</span>.<span class="title function_">test</span>(browserName) &amp;&amp; <span class="regexp">/mozilla/i</span>.<span class="title function_">test</span>(browserName)))&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Safari&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;不知道什么鬼!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//为任意一个元素绑定事件:元素,事件类型,事件处理函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addEventListener</span>(<span class="params">element,type,fn</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(element.<span class="property">addEventListener</span>)&#123;</span><br><span class="line">        <span class="comment">//支持</span></span><br><span class="line">        element.<span class="title function_">addEventListener</span>(type,fn,<span class="literal">false</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(element.<span class="property">attachEvent</span>)&#123;</span><br><span class="line">        element.<span class="title function_">attachEvent</span>(<span class="string">&quot;on&quot;</span>+type,fn);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        element[<span class="string">&quot;on&quot;</span>+type]=fn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//为任意的一个元素解绑某个事件:元素,事件类型,事件处理函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">removeEventListener</span>(<span class="params">element,type,fn</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(element.<span class="property">removeEventListener</span>)&#123;</span><br><span class="line">        element.<span class="title function_">removeEventListener</span>(type,fn,<span class="literal">false</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(element.<span class="property">detachEvent</span>)&#123;</span><br><span class="line">        element.<span class="title function_">detachEvent</span>(<span class="string">&quot;on&quot;</span>+type,fn);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        element[<span class="string">&quot;on&quot;</span>+type]=<span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取的是页面向上或者向左卷曲出去的距离的值,返回的是对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">&#123;top: (Number|number), left: (Number|number)</span>&#125;&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getScroll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">top</span>: <span class="variable language_">window</span>.<span class="property">pageYOffset</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="number">0</span>,</span><br><span class="line">        <span class="attr">left</span>: <span class="variable language_">window</span>.<span class="property">pageXOffset</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollLeft</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollLeft</span>||<span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">hrf12</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://hrf12.github.io/2022/03/13/05%20Web%20API/">http://hrf12.github.io/2022/03/13/05%20Web%20API/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://hrf12.github.io" target="_blank">hrf12blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/03/13/hello-world/"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Hexo</div></div></a></div><div class="next-post pull-right"><a href="/2022/03/09/04-JavaScript%E5%9F%BA%E7%A1%80/"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">hrf12</div><div class="author-info__description"></div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Web-API%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">1.Web API介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-API%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 API的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Web-API%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 Web API的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E6%8E%8C%E6%8F%A1%E5%B8%B8%E8%A7%81%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%90%E4%BE%9B%E7%9A%84API%E7%9A%84%E8%B0%83%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 掌握常见的浏览器提供的API的调用方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-JavaScript%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 JavaScript的组成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-1-ECMAScript-JavaScript%E7%9A%84%E6%A0%B8%E5%BF%83"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.4.1 ECMAScript - JavaScript的核心</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2-BOM-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.4.2.</span> <span class="toc-text">1.4.2 BOM - 浏览器对象模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-3-DOM-%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.4.3.</span> <span class="toc-text">1.4.3 DOM - 文档对象模型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-DOM"><span class="toc-number">2.</span> <span class="toc-text">2. DOM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-DOM%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 DOM的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81DOM"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 为什么要DOM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-DOM%E5%8F%AF%E4%BB%A5%E5%81%9A%E4%BB%80%E4%B9%88"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 DOM可以做什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%B7%BB%E5%8A%A0%E4%BA%8B%E4%BB%B6%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 添加事件的三种方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%8E%B7%E5%8F%96%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0"><span class="toc-number">3.</span> <span class="toc-text">3. 获取页面元素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%8E%B7%E5%8F%96%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 为什么要获取页面元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%A0%B9%E6%8D%AEid%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 根据id获取元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E6%A0%B9%E6%8D%AE%E6%A0%87%E7%AD%BE%E5%90%8D%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 根据标签名获取元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E6%A0%B9%E6%8D%AEname%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 根据name获取元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E6%A0%B9%E6%8D%AE%E7%B1%BB%E5%90%8D%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 根据类名获取元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E6%A0%B9%E6%8D%AE%E9%80%89%E6%8B%A9%E5%99%A8%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0"><span class="toc-number">3.6.</span> <span class="toc-text">3.6 根据选择器获取元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-getElementsByTagName%E5%92%8CquerySelector%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.7.</span> <span class="toc-text">3.7 getElementsByTagName和querySelector的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-%E6%80%BB%E7%BB%93"><span class="toc-number">3.8.</span> <span class="toc-text">3.8 总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%B1%9E%E6%80%A7%E6%93%8D%E4%BD%9C"><span class="toc-number">4.</span> <span class="toc-text">4. 属性操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E9%9D%9E%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 非表单元素的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%A0%B7%E5%BC%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 样式操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%A1%88%E4%BE%8B"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E6%A0%B7%E5%BC%8F%E6%93%8D%E4%BD%9C%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 样式操作的注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0%E5%B1%9E%E6%80%A7"><span class="toc-number">4.5.</span> <span class="toc-text">4.5 表单元素属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7%E6%93%8D%E4%BD%9C"><span class="toc-number">4.6.</span> <span class="toc-text">4.6 自定义属性操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">4.7.</span> <span class="toc-text">4.7 自定义属性的注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%B8%B8%E7%94%A8%E4%BA%8B%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">5. 常用事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 事件的基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E5%B8%B8%E7%94%A8%E7%9A%84%E4%BA%8B%E4%BB%B6"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 常用的事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%A1%88%E4%BE%8B"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E8%8A%82%E7%82%B9%E6%93%8D%E4%BD%9C"><span class="toc-number">6.</span> <span class="toc-text">6. 节点操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E8%8A%82%E7%82%B9%E4%BB%8B%E7%BB%8D"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 节点介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E8%8A%82%E7%82%B9%E6%A1%88%E4%BE%8B"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 节点案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E8%8E%B7%E5%8F%96%E8%8A%82%E7%82%B9%E7%9A%84%E4%BB%A3%E7%A0%81%E5%B0%81%E8%A3%85"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 获取节点的代码封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E8%8A%82%E7%82%B9%E6%93%8D%E4%BD%9C%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">6.4.</span> <span class="toc-text">6.4 节点操作的方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%88%9B%E5%BB%BA%E5%85%83%E7%B4%A0%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text">7. 创建元素的三种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-document-write"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 document.write()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-innerHTML"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 innerHTML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-document-createElement"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 document.createElement()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-1-%E4%BD%BF%E7%94%A8document-createElement-%E5%BE%AA%E7%8E%AF%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0"><span class="toc-number">7.3.1.</span> <span class="toc-text">7.3.1 使用document.createElement()循环插入元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-2-document-createDocumentFragment-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">7.3.2.</span> <span class="toc-text">7.3.2 document.createDocumentFragment()的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-3-%E6%A1%88%E4%BE%8B"><span class="toc-number">7.3.3.</span> <span class="toc-text">7.3.3 案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-innerHTML%E5%92%8CcreateElement-%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">7.4.</span> <span class="toc-text">7.4 innerHTML和createElement()的比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E4%BA%8B%E4%BB%B6%E8%AF%A6%E8%A7%A3"><span class="toc-number">8.</span> <span class="toc-text">8. 事件详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E6%B3%A8%E5%86%8C-x2F-%E7%A7%BB%E9%99%A4%E4%BA%8B%E4%BB%B6%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 注册&#x2F;移除事件的三种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%85%BC%E5%AE%B9%E4%BB%A3%E7%A0%81"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 绑定事件的兼容代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-addEventListener%E5%92%8CattachEvent%E5%8C%BA%E5%88%AB"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 addEventListener和attachEvent区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-number">8.4.</span> <span class="toc-text">8.4 事件对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-1-%E4%BA%8B%E4%BB%B6%E4%B8%89%E8%A6%81%E7%B4%A0"><span class="toc-number">8.4.1.</span> <span class="toc-text">8.4.1 事件三要素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-2-event%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%8E%B7%E5%8F%96"><span class="toc-number">8.4.2.</span> <span class="toc-text">8.4.2 event对象的获取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-3-event-type%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">8.4.3.</span> <span class="toc-text">8.4.3 event.type的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-4-keyCode%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">8.4.4.</span> <span class="toc-text">8.4.4 keyCode的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-5-clientX%E5%92%8CclientY"><span class="toc-number">8.4.5.</span> <span class="toc-text">8.4.5 clientX和clientY</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-6-PageX%E5%92%8CPageY"><span class="toc-number">8.4.6.</span> <span class="toc-text">8.4.6 PageX和PageY</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-7-PageX%E5%92%8CPageY%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7%E5%A4%84%E7%90%86"><span class="toc-number">8.4.7.</span> <span class="toc-text">8.4.7 PageX和PageY的兼容性处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-8-%E9%98%BB%E6%AD%A2%E4%BA%8B%E4%BB%B6%E4%BC%A0%E6%92%AD%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">8.4.8.</span> <span class="toc-text">8.4.8 阻止事件传播的方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a-%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89%E4%BA%8B%E4%BB%B6%E4%BC%A0%E6%92%AD%EF%BC%9A"><span class="toc-number">8.4.8.1.</span> <span class="toc-text">a) 为什么有事件传播：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#b-%E5%A6%82%E4%BD%95%E9%98%BB%E6%AD%A2%E4%BA%8B%E4%BB%B6%E4%BC%A0%E6%92%AD"><span class="toc-number">8.4.8.2.</span> <span class="toc-text">b) 如何阻止事件传播</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-9-%E9%98%BB%E6%AD%A2%E9%BB%98%E8%AE%A4%E4%BA%8B%E4%BB%B6"><span class="toc-number">8.4.9.</span> <span class="toc-text">8.4.9 阻止默认事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-10-%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%B4%BE"><span class="toc-number">8.4.10.</span> <span class="toc-text">8.4.10 事件委派</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a-%E4%BB%A3%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">8.4.10.1.</span> <span class="toc-text">a) 代理机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#b-%E7%BB%83%E4%B9%A0"><span class="toc-number">8.4.10.2.</span> <span class="toc-text">b) 练习</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#c-%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%B4%BE%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">8.4.10.3.</span> <span class="toc-text">c) 事件委派的原理</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E7%89%B9%E6%95%88%E5%B1%9E%E6%80%A7"><span class="toc-number">9.</span> <span class="toc-text">9. 特效属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E5%81%8F%E7%A7%BB%E9%87%8F"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 偏移量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-Client%E5%B1%9E%E6%80%A7"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 Client属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E6%BB%9A%E5%8A%A8%E5%81%8F%E7%A7%BB"><span class="toc-number">9.3.</span> <span class="toc-text">9.3 滚动偏移</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E5%AE%BD%E5%BA%A6%E7%9A%84%E6%80%BB%E7%BB%93"><span class="toc-number">9.4.</span> <span class="toc-text">9.4 宽度的总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-%E6%A1%88%E4%BE%8B"><span class="toc-number">9.5.</span> <span class="toc-text">9.5 案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-BOM"><span class="toc-number">10.</span> <span class="toc-text">10. BOM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-BOM%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">10.1.</span> <span class="toc-text">10.1 BOM的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-BOM%E7%9A%84%E9%A1%B6%E7%BA%A7%E5%AF%B9%E8%B1%A1window"><span class="toc-number">10.2.</span> <span class="toc-text">10.2 BOM的顶级对象window</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-number">10.3.</span> <span class="toc-text">10.3 对话框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E4%BA%8B%E4%BB%B6"><span class="toc-number">10.4.</span> <span class="toc-text">10.4 页面加载事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-location%E5%AF%B9%E8%B1%A1"><span class="toc-number">10.5.</span> <span class="toc-text">10.5 location对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-1-URL"><span class="toc-number">10.5.1.</span> <span class="toc-text">10.5.1 URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-2-location%E7%9A%84%E6%88%90%E5%91%98"><span class="toc-number">10.5.2.</span> <span class="toc-text">10.5.2 location的成员</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-3-%E6%A1%88%E4%BE%8B"><span class="toc-number">10.5.3.</span> <span class="toc-text">10.5.3 案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-history%E5%AF%B9%E8%B1%A1"><span class="toc-number">10.6.</span> <span class="toc-text">10.6 history对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-7-navigator%E5%AF%B9%E8%B1%A1"><span class="toc-number">10.7.</span> <span class="toc-text">10.7 navigator对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">10.8.</span> <span class="toc-text">10.8 定时器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-1-setTimeout-%E5%92%8CclearTimeout"><span class="toc-number">10.8.1.</span> <span class="toc-text">10.8.1 setTimeout()和clearTimeout()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-2-%E6%A1%88%E4%BE%8B"><span class="toc-number">10.8.2.</span> <span class="toc-text">10.8.2 案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-3-setInterval-%E5%92%8CclearInterval"><span class="toc-number">10.8.3.</span> <span class="toc-text">10.8.3 setInterval()和clearInterval()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-4-%E6%A1%88%E4%BE%8B"><span class="toc-number">10.8.4.</span> <span class="toc-text">10.8.4 案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-5-%E5%8A%A8%E7%94%BB%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%9D%E6%AD%A5%E5%B0%81%E8%A3%85"><span class="toc-number">10.8.5.</span> <span class="toc-text">10.8.5 动画函数的初步封装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-6-%E5%9B%BE%E7%89%87%E8%BD%AE%E6%92%AD"><span class="toc-number">10.8.6.</span> <span class="toc-text">10.8.6 图片轮播</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-7-%E5%8A%A8%E7%94%BB%E5%87%BD%E6%95%B0%E7%9A%84%E5%B0%81%E8%A3%85"><span class="toc-number">10.8.7.</span> <span class="toc-text">10.8.7 动画函数的封装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-8-%E6%A1%88%E4%BE%8B"><span class="toc-number">10.8.8.</span> <span class="toc-text">10.8.8 案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-9-setInterval-%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">10.8.9.</span> <span class="toc-text">10.8.9 setInterval()定时器的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a-%E8%BF%9B%E7%A8%8B"><span class="toc-number">10.8.9.1.</span> <span class="toc-text">a) 进程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#b-%E7%BA%BF%E7%A8%8B"><span class="toc-number">10.8.9.2.</span> <span class="toc-text">b) 线程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#c-js%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84"><span class="toc-number">10.8.9.3.</span> <span class="toc-text">c) js是单线程的</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-JS%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-number">11.</span> <span class="toc-text">11. JS事件循环</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6"><span class="toc-number">11.1.</span> <span class="toc-text">11.1 事件循环机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97"><span class="toc-number">11.2.</span> <span class="toc-text">11.2 任务队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E6%A1%88%E4%BE%8B1"><span class="toc-number">11.3.</span> <span class="toc-text">11.3 案例1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-%E6%A1%88%E4%BE%8B2"><span class="toc-number">11.4.</span> <span class="toc-text">11.4 案例2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%85%B6%E4%BB%96"><span class="toc-number">12.</span> <span class="toc-text">12 其他</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/03/13/hello-world/" title="Hexo"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hexo"/></a><div class="content"><a class="title" href="/2022/03/13/hello-world/" title="Hexo">Hexo</a><time datetime="2022-03-13T08:52:59.000Z" title="发表于 2022-03-13 16:52:59">2022-03-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/13/05%20Web%20API/" title="Web API"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Web API"/></a><div class="content"><a class="title" href="/2022/03/13/05%20Web%20API/" title="Web API">Web API</a><time datetime="2022-03-13T08:51:36.000Z" title="发表于 2022-03-13 16:51:36">2022-03-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/09/04-JavaScript%E5%9F%BA%E7%A1%80/" title="无题"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2022/03/09/04-JavaScript%E5%9F%BA%E7%A1%80/" title="无题">无题</a><time datetime="2022-03-09T09:49:27.180Z" title="发表于 2022-03-09 17:49:27">2022-03-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/09/CSS3/" title="CSS3"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSS3"/></a><div class="content"><a class="title" href="/2022/03/09/CSS3/" title="CSS3">CSS3</a><time datetime="2022-03-09T09:49:00.000Z" title="发表于 2022-03-09 17:49:00">2022-03-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By hrf12</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>